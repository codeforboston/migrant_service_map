!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.MapboxClient=t()}}(function(){var t;return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";t("./promise");var r=t("rest/interceptor"),o=r({success:function(t){var e=t&&t.callback;return"function"==typeof e&&e(null,t.entity,t),t},error:function(t){var e=t&&t.callback;if("function"==typeof e){var n=t.error||t.entity;"object"!=typeof n&&(n=new Error(n)),e(n)}return t}});e.exports=o},{"./promise":11,"rest/interceptor":37}],2:[function(t,e,n){"use strict";t("./promise");var r=t("rest");e.exports=function(e){return r.wrap(t("rest/interceptor/errorCode")).wrap(t("rest/interceptor/pathPrefix"),{prefix:e.endpoint}).wrap(t("rest/interceptor/mime"),{mime:"application/json"}).wrap(t("rest/interceptor/template")).wrap(t("rest/interceptor/defaultRequest"),{params:{access_token:e.accessToken}}).wrap(t("./paginator"),{access_token:e.accessToken}).wrap(t("./standard_response")).wrap(t("./callbackify"))}},{"./callbackify":1,"./paginator":10,"./promise":11,"./standard_response":24,rest:33,"rest/interceptor/defaultRequest":38,"rest/interceptor/errorCode":39,"rest/interceptor/mime":40,"rest/interceptor/pathPrefix":41,"rest/interceptor/template":42}],3:[function(t,e,n){e.exports.DEFAULT_ENDPOINT="https://api.mapbox.com"},{}],4:[function(t,e,n){"use strict";function r(t){return t.map(function(t){return s(t),"pin-"+(t.size||"l")+"-"+(t.symbol||"circle")+"("+t.longitude+","+t.latitude+")"}).join(",")}function o(t){a("LineString"===t.geojson.type,"path line must be a LineString");var e=u.fromGeoJSON(t.geojson),n="";return t.style&&(void 0!==t.style.strokewidth&&(n+="-"+t.style.strokewidth),void 0!==t.style.strokecolor&&(n+="+"+t.style.strokecolor)),"path"+n+"("+e+")"}function i(t){var e=JSON.stringify(t);return a(e.length<4096,"encoded GeoJSON must be shorter than 4096 characters long"),"geojson("+e+")"}var a=t("../vendor/invariant"),s=t("./invariant_location"),u=t("../vendor/polyline");e.exports.encodeMarkers=r,e.exports.encodePath=o,e.exports.encodeGeoJSON=i},{"../vendor/invariant":62,"../vendor/polyline":63,"./invariant_location":7}],5:[function(t,e,n){"use strict";function r(t){return t.map(function(t){return o(t),t.longitude+","+t.latitude}).join(";")}var o=t("./invariant_location");e.exports=r},{"./invariant_location":7}],6:[function(t,e,n){"use strict";function r(t){var e=t.split(".")[1];if(!e)return null;e=e.replace(/-/g,"+").replace(/_/g,"/");var n=e.length%4;if(2===n&&(e+="=="),3===n&&(e+="="),1===n||n>3)return null;try{return JSON.parse(o.decode(e)).u}catch(t){return null}}var o=t("rest/util/base64");e.exports=r},{"rest/util/base64":52}],7:[function(t,e,n){"use strict";function r(t){o("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties"),void 0!==t.zoom&&o("number"==typeof t.zoom,"zoom must be numeric")}var o=t("../vendor/invariant");e.exports=r},{"../vendor/invariant":62}],8:[function(t,e,n){"use strict";function r(t){function e(e,n){this.name=t,o("string"==typeof e,"accessToken required to instantiate Mapbox client");var r=i.DEFAULT_ENDPOINT;void 0!==n&&(o("object"==typeof n,"options must be an object"),n.endpoint&&(o("string"==typeof n.endpoint,"endpoint must be a string"),r=n.endpoint),n.account&&(o("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=a({endpoint:r,accessToken:e}),this.accessToken=e,this.endpoint=r,this.owner=this.owner||s(e),o(!!this.owner,"could not determine account from provided accessToken")}return e}var o=t("../vendor/invariant"),i=t("./constants"),a=t("./client"),s=t("./get_user");e.exports=r},{"../vendor/invariant":62,"./client":2,"./constants":3,"./get_user":6}],9:[function(t,e,n){"use strict";var r=t("./make_service"),o=t("../vendor/xtend").extendMutable,i=t("./get_user"),a=t("./services/geocoding"),s=t("./services/surface"),u=t("./services/directions"),c=t("./services/uploads"),l=t("./services/matching"),p=t("./services/datasets"),f=t("./services/matrix"),h=t("./services/tilestats"),d=t("./services/styles"),m=t("./services/static"),y=t("./services/tilesets"),v=t("./services/tokens"),g=r("MapboxClient");o(g.prototype,a.prototype,s.prototype,u.prototype,f.prototype,l.prototype,p.prototype,c.prototype,h.prototype,d.prototype,m.prototype,y.prototype,v.prototype),g.getUser=i,e.exports=g},{"../vendor/xtend":64,"./get_user":6,"./make_service":8,"./services/datasets":12,"./services/directions":13,"./services/geocoding":14,"./services/matching":15,"./services/matrix":16,"./services/static":17,"./services/styles":18,"./services/surface":19,"./services/tilesets":20,"./services/tilestats":21,"./services/tokens":22,"./services/uploads":23}],10:[function(t,e,n){"use strict";t("./promise");var r=t("rest/interceptor"),o=t("rest/parsers/rfc5988"),i=t("url"),a=t("querystring"),s=r({success:function(t,e){var n=t&&t.headers&&t.headers.Link,r=t&&t.request&&t.request.originator;if(n){var s=o.parse(n).filter(function(t){return"next"===t.rel})[0];s&&(t.nextPage=function(t){var n=i.parse(s.href),o=a.parse(n.query);return o.access_token=o.access_token||e.access_token,n.search=a.stringify(o),r({path:i.format(n),callback:t})})}return t}});e.exports=s},{"./promise":11,querystring:31,"rest/interceptor":37,"rest/parsers/rfc5988":50,url:60}],11:[function(t,e,n){"use strict";"undefined"==typeof Promise&&t("es6-promise").polyfill(),e.export=Promise},{"es6-promise":25}],12:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../../vendor/hat"),i=t("../make_service"),a=e.exports=i("MapboxDatasets"),s="/datasets/v1/{owner}/{dataset}{?access_token}",u="/datasets/v1/{owner}/{dataset}/features/{id}{?access_token}";a.prototype.listDatasets=function(t,e){return"function"==typeof t&&(e=t,t={}),this.client({path:"/datasets/v1/{owner}{?access_token,limit,fresh}",params:{limit:t.limit,fresh:t.fresh,owner:this.owner},callback:e})},a.prototype.createDataset=function(t,e){return void 0===e&&"function"==typeof t&&(e=t,t={}),r("object"==typeof t,"options must be an object"),this.client({path:"/datasets/v1/{owner}{?access_token,limit,fresh}",params:{owner:this.owner},entity:t,callback:e})},a.prototype.readDataset=function(t,e){return r("string"==typeof t,"dataset must be a string"),this.client({path:s,params:{owner:this.owner,dataset:t},callback:e})},a.prototype.updateDataset=function(t,e,n){return r("string"==typeof t,"dataset must be a string"),r("object"==typeof e,"options must be an object"),r(!!e.name||!!e.description,"options must include a name or a description"),this.client({path:s,params:{owner:this.owner,dataset:t},method:"patch",entity:e,callback:n})},a.prototype.deleteDataset=function(t,e){return r("string"==typeof t,"dataset must be a string"),this.client({path:s,params:{owner:this.owner,dataset:t},method:"delete",callback:e})},a.prototype.listFeatures=function(t,e,n){void 0===n&&"function"==typeof e&&(n=e,e={}),r("string"==typeof t,"dataset must be a string"),r("object"==typeof e,"options must be a object");var o={owner:this.owner,dataset:t};return e.limit&&(r("number"==typeof e.limit,"limit option must be a number"),o.limit=e.limit),this.client({path:"/datasets/v1/{owner}/{dataset}/features{?access_token,limit}",params:o,callback:n})},a.prototype.insertFeature=function(t,e,n){r("string"==typeof e,"dataset must be a string");var i=t.id||o();return r("string"==typeof i,"The GeoJSON feature's id must be a string"),this.client({path:u,params:{owner:this.owner,dataset:e,id:i},method:"put",entity:t,callback:n})},a.prototype.readFeature=function(t,e,n){return r("string"==typeof t,"id must be a string"),r("string"==typeof e,"dataset must be a string"),this.client({path:u,params:{owner:this.owner,dataset:e,id:t},callback:n})},a.prototype.deleteFeature=function(t,e,n){return r("string"==typeof t,"id must be a string"),r("string"==typeof e,"dataset must be a string"),this.client({path:u,params:{owner:this.owner,dataset:e,id:t},method:"delete",callback:n})}},{"../../vendor/hat":61,"../../vendor/invariant":62,"../make_service":8}],13:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../format_points"),i=t("../make_service"),a=i("MapboxDirections");a.prototype.getDirections=function(t,e,n){void 0===n&&"function"==typeof e?(n=e,e={}):void 0===e&&(e={}),r(Array.isArray(t),"waypoints must be an array"),r("object"==typeof e,"options must be an object");var i=o(t),a={encodedWaypoints:i,profile:"driving",account:"mapbox",alternatives:!0,steps:!0,geometries:"geojson"};e.profile&&(r("string"==typeof e.profile,"profile option must be string"),a.profile=e.profile),e.account&&(r("string"==typeof e.account,"account option must be string"),a.account=e.account),void 0!==e.alternatives&&(r("boolean"==typeof e.alternatives,"alternatives option must be boolean"),a.alternatives=e.alternatives),e.radiuses&&(r(Array.isArray(e.radiuses),"radiuses must be an array"),r(e.radiuses.length===t.length,"There must be as many radiuses as there are waypoints in the request"),a.radiuses=e.radiuses.join(";")),void 0!==e.steps&&(r("boolean"==typeof e.steps,"steps option must be boolean"),a.steps=e.steps);var s=["polyline","geojson"];e.geometries&&(r(-1!==s.indexOf(e.geometries),"geometries option must be "+s),a.geometries=e.geometries);var u=["simplified","full"];return e.overview&&(r(-1!==u.indexOf(e.overview),"overview option must be "+u),a.overview=e.overview),void 0!==e.continue_straight&&(r("boolean"==typeof e.continue_straight,"continue_straight option must be boolean"),a.continue_straight=e.continue_straight),e.bearings&&(r(Array.isArray(e.radiuses),"bearings must be an array"),r(e.bearings.length===t.length,"There must be as many bearings as there are waypoints in the request"),a.bearings=e.bearings.join(";")),this.client({path:"/directions/v5/{account}/{profile}/{encodedWaypoints}.json{?access_token,alternatives,geometries,overview,radiuses,steps,continue_straight,bearings}",params:a,callback:n})},e.exports=a},{"../../vendor/invariant":62,"../format_points":5,"../make_service":8}],14:[function(t,e,n){"use strict";function r(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var o=t("../../vendor/invariant"),i=t("../make_service"),a=i("MapboxGeocoding");a.prototype.geocodeForward=function(t,e,n){if(void 0!==n||void 0!==e&&"function"!=typeof e||(n=e,e={}),Array.isArray(t)){if("mapbox.places-permanent"!==e.dataset)throw new Error("Batch geocoding is only available with the mapbox.places-permanent endpoint. See https://mapbox.com/api-documentation/#batch-requests for details");t=t.join(";")}o("string"==typeof t,"query must be a string"),o("object"==typeof e,"options must be an object");var i={query:t,dataset:"mapbox.places"},a=3;return e.precision&&(o("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.proximity&&(o("number"==typeof e.proximity.latitude&&"number"==typeof e.proximity.longitude,"proximity must be an object with numeric latitude & longitude properties"),i.proximity=r(e.proximity.longitude,a)+","+r(e.proximity.latitude,a)),e.bbox&&(o("number"==typeof e.bbox[0]&&"number"==typeof e.bbox[1]&&"number"==typeof e.bbox[2]&&"number"==typeof e.bbox[3]&&4===e.bbox.length,"bbox must be an array with numeric values in the form [minX, minY, maxX, maxY]"),i.bbox=e.bbox[0]+","+e.bbox[1]+","+e.bbox[2]+","+e.bbox[3]),e.limit&&(o("number"==typeof e.limit,"limit must be a number"),i.limit=e.limit),e.dataset&&(o("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset),e.country&&(Array.isArray(e.country)?i.country=e.country.join(","):(o("string"==typeof e.country,"country option must be an array or string"),i.country=e.country)),e.language&&(Array.isArray(e.language)?i.language=e.language.join(","):(o("string"==typeof e.language,"language option must be an array or string"),i.language=e.language)),e.types&&(Array.isArray(e.types)?i.types=e.types.join(","):(o("string"==typeof e.types,"types option must be an array or string"),i.types=e.types)),"boolean"==typeof e.autocomplete&&(o("boolean"==typeof e.autocomplete,"autocomplete must be a boolean"),i.autocomplete=e.autocomplete),this.client({path:"/geocoding/v5/{dataset}/{query}.json{?access_token,proximity,country,types,bbox,limit,autocomplete,language}",params:i,callback:n})},a.prototype.geocodeReverse=function(t,e,n){void 0!==n||void 0!==e&&"function"!=typeof e||(n=e,e={}),o("object"==typeof t&&null!==t,"location must be an object"),o("object"==typeof e,"options must be an object"),o("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties");var i={dataset:"mapbox.places"};e.dataset&&(o("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset);var a=5;return e.precision&&(o("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.language&&(Array.isArray(e.language)?i.language=e.language.join(","):(o("string"==typeof e.language,"language option must be an array or string"),i.language=e.language)),e.types&&(Array.isArray(e.types)?i.types=e.types.join(","):(o("string"==typeof e.types,"types option must be an array or string"),i.types=e.types)),e.limit&&(o("number"==typeof e.limit,"limit option must be a number"),o(1===e.types.split(",").length,"a single type must be specified to use the limit option"),i.limit=e.limit),i.longitude=r(t.longitude,a),i.latitude=r(t.latitude,a),this.client({path:"/geocoding/v5/{dataset}/{longitude},{latitude}.json{?access_token,types,limit,language}",params:i,callback:n})},e.exports=a},{"../../vendor/invariant":62,"../make_service":8}],15:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../make_service"),i=o("MapboxMatching");i.prototype.matching=function(t,e,n){void 0===n&&"function"==typeof e&&(n=e,e={}),r(Array.isArray(t),"coordinates must be an array");var o={profile:"driving",account:"mapbox",geometries:"geojson",coordinates:t.join(";")};e.profile&&(r("string"==typeof e.profile,"profile option must be string"),o.profile=e.profile);var i=["polyline","geojson"];e.geometries&&(r(-1!==i.indexOf(e.geometries),"geometries option must be "+i),o.geometries=e.geometries),e.radiuses&&(r(Array.isArray(e.radiuses),"radiuses must be an array"),r(e.radiuses.length===t.length,"There must be as many radiuses as there are coordinates in the request"),o.radiuses=e.radiuses.join(";")),void 0!==e.steps&&(r("boolean"==typeof e.steps,"steps option must be boolean"),o.steps=e.steps);var a=["full","simplified"];return void 0!==e.overview&&(r(-1!==a.indexOf(e.overview)||!1===e.overview,"overview option must be "+a+" or false"),o.overview=e.overview),e.timestamps&&(r(Array.isArray(e.timestamps),"timestamps must be an array"),r(e.timestamps.length===t.length,"There must be as many timestamps as there are coordinates in the request"),o.timestamps=e.timestamps.join(";")),e.annotations&&(r(Array.isArray(e.annotations),"annotations must be an array"),o.annotations=e.annotations.join()),this.client({path:"/matching/v5/{account}/{profile}/{coordinates}.json{?access_token,geometries,radiuses,steps,overview,timestamps,annotations}",params:o,method:"get",callback:n})},e.exports=i},{"../../vendor/invariant":62,"../make_service":8}],16:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../format_points"),i=t("../make_service"),a=i("MapboxMatrix");a.prototype.getMatrix=function(t,e,n){void 0===n&&"function"==typeof e?(n=e,e={}):void 0===e&&(e={}),r(Array.isArray(t),"waypoints must be an array"),r("object"==typeof e,"options must be an object");var i=o(t),a={encodedWaypoints:i,profile:"driving"};return e.profile&&(r("string"==typeof e.profile,"profile option must be string"),a.profile=e.profile),this.client({path:"/directions-matrix/v1/mapbox/{profile}/{encodedWaypoints}.json{?access_token}",params:a,callback:n})},e.exports=a},{"../../vendor/invariant":62,"../format_points":5,"../make_service":8}],17:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../../vendor/xtend").extend,i=t("rest/util/uriTemplate"),a=t("../encode_overlay"),s=t("../invariant_location"),u=t("../make_service"),c=u("MapboxStatic");c.prototype.getStaticURL=function(t,e,n,u,c,l){r("string"==typeof t,"username option required and must be a string"),r("string"==typeof e,"styleid option required and must be a string"),r("number"==typeof n,"width option required and must be a number"),r("number"==typeof u,"height option required and must be a number");var p,f={retina:""};"auto"===c?p="auto":(s(c),p=c.longitude+","+c.latitude+","+c.zoom,"pitch"in c?p+=","+(c.bearing||0)+","+c.pitch:"bearing"in c&&(p+=","+c.bearing));var h={};l&&(r("object"==typeof l,"options must be an object"),l.format&&(r("string"==typeof l.format,"format must be a string"),h.format=l.format),l.retina&&(r("boolean"==typeof l.retina,"retina must be a boolean"),h.retina=l.retina),l.markers?h.overlay="/"+a.encodeMarkers(l.markers):l.geojson?h.overlay="/"+a.encodeGeoJSON(l.geojson):l.path&&(h.overlay="/"+a.encodePath(l.path)),"attribution"in l&&(r("boolean"==typeof l.attribution,"attribution must be a boolean"),h.attribution=l.attribution),"logo"in l&&(r("boolean"==typeof l.logo,"logo must be a boolean"),h.logo=l.logo),l.before_layer&&(r("string"==typeof l.before_layer,"before_layer must be a string"),h.before_layer=l.before_layer));var d=o(f,h,{username:t,styleid:e,width:n,xyzbp:p,height:u,access_token:this.accessToken});return!0===d.retina&&(d.retina="@2x"),this.endpoint+i.expand("/styles/v1/{username}/{styleid}/static{+overlay}/{+xyzbp}/{width}x{height}{+retina}{?access_token,attribution,logo,before_layer}",d)},c.prototype.getStaticClassicURL=function(t,e,n,u,c){r("string"==typeof t,"mapid option required and must be a string"),r("number"==typeof e,"width option required and must be a number"),r("number"==typeof n,"height option required and must be a number");var l,p={format:"png",retina:""};"auto"===u?l="auto":(s(u),l=u.longitude+","+u.latitude+","+u.zoom);var f={};c&&(r("object"==typeof c,"options must be an object"),c.format&&(r("string"==typeof c.format,"format must be a string"),f.format=c.format),c.retina&&(r("boolean"==typeof c.retina,"retina must be a boolean"),f.retina=c.retina),c.markers?f.overlay="/"+a.encodeMarkers(c.markers):c.geojson?f.overlay="/"+a.encodeGeoJSON(c.geojson):c.path&&(f.overlay="/"+a.encodePath(c.path)));var h=o(p,f,{mapid:t,width:e,xyz:l,height:n,access_token:this.accessToken});return!0===h.retina&&(h.retina="@2x"),this.endpoint+i.expand("/v4/{mapid}{+overlay}/{+xyz}/{width}x{height}{+retina}{.format}{?access_token}",h)},e.exports=c},{"../../vendor/invariant":62,"../../vendor/xtend":64,"../encode_overlay":4,"../invariant_location":7,"../make_service":8,"rest/util/uriTemplate":59}],18:[function(t,e,n){(function(n){"use strict";var r=t("../../vendor/invariant"),o=t("rest/util/uriTemplate"),i=t("../make_service"),a=e.exports=i("MapboxStyles");a.prototype.listStyles=function(t){return this.client({path:"/styles/v1/{owner}{?access_token}",params:{owner:this.owner},callback:t})},a.prototype.createStyle=function(t,e){return this.client({path:"/styles/v1/{owner}{?access_token}",params:{owner:this.owner},entity:t,callback:e})},a.prototype.updateStyle=function(t,e,n){return r("string"==typeof e,"style id must be a string"),this.client({path:"/styles/v1/{owner}/{styleid}{?access_token}",params:{owner:this.owner,styleid:e},entity:t,method:"patch",callback:n})},a.prototype.deleteStyle=function(t,e){return r("string"==typeof t,"styleid must be a string"),this.client({path:"/styles/v1/{owner}/{styleid}{?access_token}",params:{owner:this.owner,styleid:t},method:"delete",callback:e})},a.prototype.readStyle=function(t,e){return r("string"==typeof t,"styleid must be a string"),this.client({path:"/styles/v1/{owner}/{styleid}{?access_token}",params:{owner:this.owner,styleid:t},callback:e})},a.prototype.readSprite=function(t,e,n){r("string"==typeof t,"styleid must be a string"),"function"==typeof e&&(n=e,e={});var o="";e.retina&&(r("boolean"==typeof e.retina,"retina option must be a boolean value"),e.retina&&(o="@2x"));var i="json";return e.format&&(r("json"===e.format||"png"===e.format,"format parameter must be either json or png"),i=e.format),this.client({path:"/styles/v1/{owner}/{styleid}/sprite{+retina}{.format}{?access_token}",params:{owner:this.owner,retina:o,format:i,styleid:t},callback:n})},a.prototype.readFontGlyphRanges=function(t,e,n,o){return r("string"==typeof t,"font must be a string"),r("number"==typeof e,"start must be a number"),r("number"==typeof n,"end must be a number"),this.client({path:"/fonts/v1/{owner}/{font}/{start}-{end}.pbf{?access_token}",params:{owner:this.owner,font:t,start:e,end:n},callback:o})},a.prototype.addIcon=function(t,e,o,i){return r("string"==typeof t,"style must be a string"),r("string"==typeof e,"icon name must be a string"),r(n.isBuffer(o),"icon must be a Buffer"),this.client({path:"/styles/v1/{owner}/{styleid}/sprite/{iconName}{?access_token}",params:{owner:this.owner,styleid:t,iconName:e},headers:{"Content-Type":"text/plain"},entity:o,method:"put",callback:i})},a.prototype.deleteIcon=function(t,e,n){return r("string"==typeof t,"style must be a string"),r("string"==typeof e,"icon name must be a string"),this.client({path:"/styles/v1/{owner}/{styleid}/sprite/{iconName}{?access_token}",params:{owner:this.owner,styleid:t,iconName:e},method:"delete",callback:n})},a.prototype.embedStyle=function(t,e){r("string"==typeof t,"style must be a string");var n={styleid:t,access_token:this.accessToken,owner:this.owner,title:!1,zoomwheel:!0};return e&&(void 0!==e.title&&(r("boolean"==typeof e.title,"title must be a boolean"),n.title=e.title),void 0!==e.zoomwheel&&(r("boolean"==typeof e.zoomwheel,"zoomwheel must be a boolean"),n.zoomwheel=e.zoomwheel)),this.endpoint+o.expand("/styles/v1/{owner}/{styleid}.html{?access_token,zoomwheel,title}",n)}}).call(this,{isBuffer:t("../../node_modules/is-buffer/index.js")})},{"../../node_modules/is-buffer/index.js":26,"../../vendor/invariant":62,"../make_service":8,"rest/util/uriTemplate":59}],19:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../format_points"),i=t("../make_service"),a=i("MapboxSurface");a.prototype.surface=function(t,e,n,i,a,s){void 0===s&&"function"==typeof a&&(s=a,a={}),r("string"==typeof t,"mapid must be a string"),r("string"==typeof e,"layer must be a string"),r(Array.isArray(n),"fields must be an array of strings"),r(Array.isArray(i)||"string"==typeof i,"path must be an array of objects or a string"),r("object"==typeof a,"options must be an object");var u=!0,c=!1;void 0!==a.interpolate&&(r("boolean"==typeof a.interpolate,"interpolate must be a boolean"),u=a.interpolate),void 0!==a.geojson&&(r("boolean"==typeof a.geojson,"geojson option must be boolean"),c=a.geojson);var l={geojson:c,layer:e,mapid:t,fields:n.join(","),interpolate:u};return Array.isArray(i)?l.points=o(i):l.encoded_polyline=i,void 0!==a.zoom&&(r("number"==typeof a.zoom,"zoom must be a number"),l.z=a.zoom),this.client({path:"/v4/surface/{mapid}.json{?access_token,layer,fields,points,geojson,interpolate,encoded_polyline}",params:l,callback:s})},e.exports=a},{"../../vendor/invariant":62,"../format_points":5,"../make_service":8}],20:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../make_service"),i=e.exports=o("MapboxTilesets");i.prototype.tilequery=function(t,e,n,o){return r("string"==typeof t,"mapid must be a string"),r("object"==typeof e,"position must be an array"),r(2==e.length,"position must be an array of length 2"),r("number"==typeof e[0]&&"number"==typeof e[1],"position must be an array of two numbers"),"function"==typeof n&&(o=n,n={}),this.client({path:"/v4/{mapid}/tilequery/{longitude},{latitude}.json{?access_token,radius,limit}",params:{mapid:t,longitude:e[0],latitude:e[1],radius:n.radius,limit:n.limit},callback:o})},i.prototype.listTilesets=function(t,e){return"function"==typeof t&&(e=t,t=null),t=t||{},this.client({path:"/tilesets/v1/{owner}{?access_token,limit}",params:{owner:this.owner,limit:t.limit},callback:e})}},{"../../vendor/invariant":62,"../make_service":8}],21:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../make_service"),i=e.exports=o("MapboxTilestats");i.prototype.getTilestats=function(t,e){r("string"==typeof t,"tileset must be a string");var n=t.split(".")[0];return n===t&&(n=this.owner),this.client({path:"/tilestats/v1/{owner}/{tileset}{?access_token}",params:{owner:n,tileset:t},callback:e})},i.prototype.putTilestats=function(t,e,n){r("string"==typeof t,"tileset must be a string");var o=t.split(".")[0];return o===t&&(o=this.owner),this.client({path:"/tilestats/v1/{owner}/{tileset}{?access_token}",params:{owner:o,tileset:t},entity:e,method:"put",callback:n})}},{"../../vendor/invariant":62,"../make_service":8}],22:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../make_service"),i=e.exports=o("MapboxTokens");i.prototype.listTokens=function(t){return this.client({path:"/tokens/v2/{owner}{?access_token}",params:{owner:this.owner},callback:t})},i.prototype.createToken=function(t,e,n){return r("string"==typeof t,"note must be a string"),r("[object Array]"===Object.prototype.toString.call(e),"scopes must be an array"),this.client({path:"/tokens/v2/{owner}{?access_token}",params:{owner:this.owner},entity:{scopes:e,note:t},callback:n})},i.prototype.createTemporaryToken=function(t,e,n){return r("string"==typeof t,"expires must be a string"),r("[object Array]"===Object.prototype.toString.call(e),"scopes must be an array"),this.client({path:"/tokens/v2/{owner}{?access_token}",params:{owner:this.owner},entity:{scopes:e,expires:t},callback:n})},i.prototype.updateTokenAuthorization=function(t,e,n){return r("string"==typeof t,"authorization_id must be a string"),r("[object Array]"===Object.prototype.toString.call(e),"scopes must be an array"),this.client({path:"/tokens/v2/{owner}/{authorization_id}{?access_token}",params:{authorization_id:t,owner:this.owner},entity:{scopes:e},method:"patch",callback:n})},i.prototype.deleteTokenAuthorization=function(t,e){return r("string"==typeof t,"authorization_id must be a string"),this.client({path:"/tokens/v2/{owner}/{authorization_id}{?access_token}",params:{authorization_id:t,owner:this.owner},method:"delete",callback:e})},i.prototype.retrieveToken=function(t,e){return r("string"==typeof t,"access_token must be a string"),this.client({path:"/tokens/v2{?access_token}",params:{access_token:t},callback:e})},i.prototype.listScopes=function(t){return this.client({path:"/scopes/v1/{owner}{?access_token}",params:{owner:this.owner},callback:t})}},{"../../vendor/invariant":62,"../make_service":8}],23:[function(t,e,n){"use strict";var r=t("../../vendor/invariant"),o=t("../make_service"),i=e.exports=o("MapboxUploads"),a="/uploads/v1/{owner}{?access_token}",s="/uploads/v1/{owner}/{upload}{?access_token}";i.prototype.listUploads=function(t){return this.client({path:a,params:{owner:this.owner},callback:t})},i.prototype.createUploadCredentials=function(t){return this.client({path:"/uploads/v1/{owner}/credentials{?access_token}",params:{owner:this.owner},method:"post",callback:t})},i.prototype.createUpload=function(t,e){return r("object"==typeof t,"options must be an object"),this.client({path:a,params:{owner:this.owner},entity:t,callback:e})},i.prototype.readUpload=function(t,e){return r("string"==typeof t,"upload must be a string"),this.client({path:s,params:{owner:this.owner,upload:t},callback:e})},i.prototype.deleteUpload=function(t,e){return r("string"==typeof t,"upload must be a string"),this.client({method:"delete",path:s,params:{owner:this.owner,upload:t},callback:e})}},{"../../vendor/invariant":62,"../make_service":8}],24:[function(t,e,n){function r(t){return{url:t.url,status:t.status&&t.status.code,headers:t.headers,entity:t.entity,error:t.error,callback:t.request&&t.request.callback,nextPage:t.nextPage}}var o=t("rest/interceptor"),i=o({response:r});e.exports=i},{"rest/interceptor":37}],25:[function(e,n,r){(function(o,i){!function(e,o){"object"==typeof r&&void 0!==n?n.exports=o():"function"==typeof t&&t.amd?t(o):e.ES6Promise=o()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function r(t){H=t}function a(t){Q=t}function s(){return void 0!==G?function(){G(c)}:u()}function u(){var t=setTimeout;return function(){return t(c,1)}}function c(){for(var t=0;t<B;t+=2){(0,K[t])(K[t+1]),K[t]=void 0,K[t+1]=void 0}B=0}function l(t,e){var n=arguments,r=this,o=new this.constructor(f);void 0===o[tt]&&q(o);var i=r._state;return i?function(){var t=n[i-1];Q(function(){return T(i,o,t,r._result)})}():A(r,o,t,e),o}function p(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(f);return w(n,t),n}function f(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function m(t){try{return t.then}catch(t){return ot.error=t,ot}}function y(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function v(t,e,n){Q(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?w(t,n):_(t,n))},function(e){r||(r=!0,k(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,k(t,o))},t)}function g(t,e){e._state===nt?_(t,e._result):e._state===rt?k(t,e._result):A(e,void 0,function(e){return w(t,e)},function(e){return k(t,e)})}function b(t,e,r){e.constructor===t.constructor&&r===l&&e.constructor.resolve===p?g(t,e):r===ot?(k(t,ot.error),ot.error=null):void 0===r?_(t,e):n(r)?v(t,e,r):_(t,e)}function w(e,n){e===n?k(e,h()):t(n)?b(e,n,m(n)):_(e,n)}function x(t){t._onerror&&t._onerror(t._result),j(t)}function _(t,e){t._state===et&&(t._result=e,t._state=nt,0!==t._subscribers.length&&Q(j,t))}function k(t,e){t._state===et&&(t._state=rt,t._result=e,Q(x,t))}function A(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+nt]=n,o[i+rt]=r,0===i&&t._state&&Q(j,t)}function j(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?T(n,r,o,i):o(i);t._subscribers.length=0}}function C(){this.error=null}function O(t,e){try{return t(e)}catch(t){return it.error=t,it}}function T(t,e,r,o){var i=n(r),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=O(r,o),a===it?(c=!0,s=a.error,a.error=null):u=!0,e===a)return void k(e,d())}else a=o,u=!0;e._state!==et||(i&&u?w(e,a):c?k(e,s):t===nt?_(e,a):t===rt&&k(e,a))}function S(t,e){try{e(function(e){w(t,e)},function(e){k(t,e)})}catch(e){k(t,e)}}function P(){return at++}function q(t){t[tt]=at++,t._state=void 0,t._result=void 0,t._subscribers=[]}function E(t,e){this._instanceConstructor=t,this.promise=new t(f),this.promise[tt]||q(this.promise),J(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):k(this.promise,z())}function z(){return new Error("Array Methods must be provided an Array")}function M(t){return new E(this,t).promise}function U(t){var e=this;return new e(J(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function F(t){var e=this,n=new e(f);return k(n,t),n}
function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function I(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(t){this[tt]=P(),this._result=this._state=void 0,this._subscribers=[],f!==t&&("function"!=typeof t&&D(),this instanceof R?S(this,t):I())}function N(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=R}var L=void 0;L=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var J=L,B=0,G=void 0,H=void 0,Q=function(t,e){K[B]=t,K[B+1]=e,2===(B+=2)&&(H?H(c):X())},$="undefined"!=typeof window?window:void 0,W=$||{},Y=W.MutationObserver||W.WebKitMutationObserver,Z="undefined"==typeof self&&void 0!==o&&"[object process]"==={}.toString.call(o),V="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,K=new Array(1e3),X=void 0;X=Z?function(){return function(){return o.nextTick(c)}}():Y?function(){var t=0,e=new Y(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():V?function(){var t=new MessageChannel;return t.port1.onmessage=c,function(){return t.port2.postMessage(0)}}():void 0===$&&"function"==typeof e?function(){try{var t=e,n=t("vertx");return G=n.runOnLoop||n.runOnContext,s()}catch(t){return u()}}():u();var tt=Math.random().toString(36).substring(16),et=void 0,nt=1,rt=2,ot=new C,it=new C,at=0;return E.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===et&&n<t;n++)this._eachEntry(e[n],n)},E.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===p){var o=m(t);if(o===l&&t._state!==et)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===R){var i=new n(f);b(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},E.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===et&&(this._remaining--,t===rt?k(r,n):this._result[e]=n),0===this._remaining&&_(r,this._result)},E.prototype._willSettleAt=function(t,e){var n=this;A(t,void 0,function(t){return n._settledAt(nt,e,t)},function(t){return n._settledAt(rt,e,t)})},R.all=M,R.race=U,R.resolve=p,R.reject=F,R._setScheduler=r,R._setAsap=a,R._asap=Q,R.prototype={constructor:R,then:l,catch:function(t){return this.then(null,t)}},R.polyfill=N,R.Promise=R,R})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:27}],26:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function o(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}e.exports=function(t){return null!=t&&(r(t)||o(t)||!!t._isBuffer)}},{}],27:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(p===setTimeout)return setTimeout(t,0);if((p===r||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}function a(t){if(f===clearTimeout)return clearTimeout(t);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){y&&d&&(y=!1,d.length?m=d.concat(m):v=-1,m.length&&u())}function u(){if(!y){var t=i(s);y=!0;for(var e=m.length;e;){for(d=m,m=[];++v<e;)d&&d[v].run();v=-1,e=m.length}d=null,y=!1,a(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var p,f,h=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:r}catch(t){p=r}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(t){f=o}}();var d,m=[],y=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new c(t,e)),1!==m.length||y||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],28:[function(e,n,r){(function(e){!function(o){function i(t){throw new RangeError(M[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function s(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(z,"."),r+a(t.split("."),e).join(".")}function u(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function c(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:k}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,n){var r=0;for(t=n?F(t/O):t>>1,t+=F(t/e);t>U*j>>1;r+=k)t=F(t/U);return F(r+(U+1)*t/(t+C))}function h(t){var e,n,r,o,a,s,u,p,h,d,m=[],y=t.length,v=0,g=S,b=T;for(n=t.lastIndexOf(P),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&i("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<y;){for(a=v,s=1,u=k;o>=y&&i("invalid-input"),p=l(t.charCodeAt(o++)),(p>=k||p>F((_-v)/s))&&i("overflow"),v+=p*s,h=u<=b?A:u>=b+j?j:u-b,!(p<h);u+=k)d=k-h,s>F(_/d)&&i("overflow"),s*=d;e=m.length+1,b=f(v-a,e,0==a),F(v/e)>_-g&&i("overflow"),g+=F(v/e),v%=e,m.splice(v++,0,g)}return c(m)}function d(t){var e,n,r,o,a,s,c,l,h,d,m,y,v,g,b,w=[];for(t=u(t),y=t.length,e=S,n=0,a=T,s=0;s<y;++s)(m=t[s])<128&&w.push(D(m));for(r=o=w.length,o&&w.push(P);r<y;){for(c=_,s=0;s<y;++s)(m=t[s])>=e&&m<c&&(c=m);for(v=r+1,c-e>F((_-n)/v)&&i("overflow"),n+=(c-e)*v,e=c,s=0;s<y;++s)if(m=t[s],m<e&&++n>_&&i("overflow"),m==e){for(l=n,h=k;d=h<=a?A:h>=a+j?j:h-a,!(l<d);h+=k)b=l-d,g=k-d,w.push(D(p(d+b%g,0))),l=F(b/g);w.push(D(p(l,0))),a=f(n,v,r==o),n=0,++r}++n,++e}return w.join("")}function m(t){return s(t,function(t){return q.test(t)?h(t.slice(4).toLowerCase()):t})}function y(t){return s(t,function(t){return E.test(t)?"xn--"+d(t):t})}var v="object"==typeof r&&r&&!r.nodeType&&r,g="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof e&&e;b.global!==b&&b.window!==b&&b.self!==b||(o=b);var w,x,_=2147483647,k=36,A=1,j=26,C=38,O=700,T=72,S=128,P="-",q=/^xn--/,E=/[^\x20-\x7E]/,z=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=k-A,F=Math.floor,D=String.fromCharCode;if(w={version:"1.4.1",ucs2:{decode:u,encode:c},decode:h,encode:d,toASCII:y,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return w});else if(v&&g)if(n.exports==v)g.exports=w;else for(x in w)w.hasOwnProperty(x)&&(v[x]=w[x]);else o.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var p,f,h,d,m=t[l].replace(s,"%20"),y=m.indexOf(n);y>=0?(p=m.substr(0,y),f=m.substr(y+1)):(p=m,f=""),h=decodeURIComponent(p),d=decodeURIComponent(f),r(a,h)?o(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],30:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(o(a))+n;return i(t[a])?r(t[a],function(t){return s+encodeURIComponent(o(t))}).join(e):s+encodeURIComponent(o(t[a]))}).join(e):s?encodeURIComponent(o(s))+n+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],31:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":29,"./encode":30}],32:[function(t,e,n){"use strict";function r(t,e){var n,r,o,i,a;if(n=t,o={},e){for(r in e)a=new RegExp("\\{"+r+"\\}"),a.test(n)?n=n.replace(a,encodeURIComponent(e[r]),"g"):o[r]=e[r];i=s.write(o),i&&(n+=-1===n.indexOf("?")?"?":"&",n+=i)}return n}function o(t,e){return 0===t.indexOf(e)}function i(t,e){if(!(this instanceof i))return new i(t,e);t instanceof i?(this._template=t.template,this._params=a({},this._params,e)):(this._template=(t||"").toString(),this._params=e||{})}var a,s,u,c,l,p;a=t("./util/mixin"),s=t("./mime/type/application/x-www-form-urlencoded"),c=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,l=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,p=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,i.prototype={append:function(t,e){return new i(this._template+t,a({},this._params,e))},fullyQualify:function(){if("undefined"==typeof location)return this;if(this.isFullyQualified())return this;var t=this._template;return o(t,"//")?t=u.protocol+t:o(t,"/")?t=u.origin+t:this.isAbsolute()||(t=u.origin+u.pathname.substring(0,u.pathname.lastIndexOf("/")+1)),-1===t.indexOf("/",8)&&(t+="/"),new i(t,this._params)},isAbsolute:function(){return l.test(this.build())},isFullyQualified:function(){return p.test(this.build())},isCrossOrigin:function(){if(!u)return!0;var t=this.parts();return t.protocol!==u.protocol||t.hostname!==u.hostname||t.port!==u.port},parts:function(){var t,e;return t=this.fullyQualify().build().match(c),e={href:t[0],protocol:t[1],host:t[3]||"",hostname:t[4]||"",port:t[6],pathname:t[7]||"",search:t[8]||"",hash:t[9]||""},e.origin=e.protocol+"//"+e.host,e.port=e.port||("https:"===e.protocol?"443":"http:"===e.protocol?"80":""),e},build:function(t){return r(this._template,a({},this._params,t))},toString:function(){return this.build()}},u="undefined"!=typeof location?new i(location.href).parts():void 0,e.exports=i},{"./mime/type/application/x-www-form-urlencoded":47,"./util/mixin":55}],33:[function(t,e,n){"use strict";var r=t("./client/default"),o=t("./client/xhr");r.setPlatformDefaultClient(o),e.exports=r},{"./client/default":35,"./client/xhr":36}],34:[function(t,e,n){"use strict";e.exports=function(t,e){return e&&(t.skip=function(){return e}),t.wrap=function(e,n){return e(t,n)},t.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),t.wrap.apply(this,arguments)},t}},{}],35:[function(t,e,n){"use strict";function r(){return i.apply(void 0,arguments)}var o,i,a;o=t("../client"),"function"!=typeof Promise&&console&&console.log&&console.log("An ES6 Promise implementation is required to use rest.js. See https://github.com/cujojs/when/blob/master/docs/es6-promise-shim.md for using when.js as a Promise polyfill."),r.setDefaultClient=function(t){i=t},r.getDefaultClient=function(){return i},r.resetDefaultClient=function(){i=a},r.setPlatformDefaultClient=function(t){if(a)throw new Error("Unable to redefine platformDefaultClient");i=a=t},e.exports=o(r)},{"../client":34}],36:[function(t,e,n){"use strict";function r(t){var e={};return t?(t.trim().split(u).forEach(function(t){var n,r,o;n=t.indexOf(":"),r=i(t.substring(0,n).trim()),o=t.substring(n+1).trim(),e[r]?Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]:e[r]=o}),e):e}function o(t,e){return Object.keys(e||{}).forEach(function(n){if(e.hasOwnProperty(n)&&n in t)try{t[n]=e[n]}catch(t){}}),t}var i,a,s,u;i=t("../util/normalizeHeaderName"),a=t("../util/responsePromise"),s=t("../client"),u=/[\r|\n]+/,e.exports=s(function(t){return a.promise(function(e,n){var i,a,s,u,c,l,p,f;if(t="string"==typeof t?{path:t}:t||{},p={request:t},t.canceled)return p.error="precanceled",void n(p);if(!(f=t.engine||XMLHttpRequest))return void n({request:t,error:"xhr-not-available"});c=t.entity,t.method=t.method||(c?"POST":"GET"),a=t.method,s=p.url=t.path||"";try{i=p.raw=new f,o(i,t.mixin),i.open(a,s,!0),o(i,t.mixin),u=t.headers;for(l in u)"Content-Type"===l&&"multipart/form-data"===u[l]||i.setRequestHeader(l,u[l]);t.canceled=!1,t.cancel=function(){t.canceled=!0,i.abort(),n(p)},i.onreadystatechange=function(){t.canceled||i.readyState===(f.DONE||4)&&(p.status={code:i.status,text:i.statusText},p.headers=r(i.getAllResponseHeaders()),p.entity=i.responseText,1223===p.status.code&&(p.status.code=204),p.status.code>0?e(p):setTimeout(function(){e(p)},0))};try{i.onerror=function(){p.error="loaderror",n(p)}}catch(t){}i.send(c)}catch(t){p.error="loaderror",n(p)}})})},{"../client":34,"../util/normalizeHeaderName":56,"../util/responsePromise":57}],37:[function(t,e,n){"use strict";function r(t){return t}function o(t){return t}function i(t){return t}function a(t){if(!(this instanceof a))return new a(t);c(this,t)}function s(t){var e,n,s,c;return t=t||{},e=t.init||r,n=t.request||o,s=t.success||t.response||i,c=t.error||function(){return Promise.resolve((t.response||i).apply(this,arguments)).then(Promise.reject.bind(Promise))},function(r,o){function i(t){var e,u;return e={},u={arguments:Array.prototype.slice.call(arguments),client:i},t="string"==typeof t?{path:t}:t||{},t.originator=t.originator||i,l(n.call(e,t,o,u),function(t){var n,i,l;return l=r,t instanceof a&&(i=t.abort,l=t.client||l,n=t.response,t=t.request),n=n||Promise.resolve(t).then(function(t){return Promise.resolve(l(t)).then(function(t){return s.call(e,t,o,u)},function(t){return c.call(e,t,o,u)})}),i?Promise.race([n,i]):n},function(e){return Promise.reject({request:t,error:e})})}return"object"==typeof r&&(o=r),"function"!=typeof r&&(r=t.client||u),o=e(o||{}),p(i,r)}}var u,c,l,p;u=t("./client/default"),c=t("./util/mixin"),l=t("./util/responsePromise"),p=t("./client"),s.ComplexRequest=a,e.exports=s},{"./client":34,"./client/default":35,"./util/mixin":55,"./util/responsePromise":57}],38:[function(t,e,n){"use strict";var r,o,i;r=t("../interceptor"),o=t("../util/mixin"),i=function(){function t(t,e,n){(t in e||t in n)&&(e[t]=o({},n[t],e[t]))}function e(t,e,n){t in n&&!(t in e)&&(e[t]=n[t])}var n={method:e,path:e,params:t,headers:t,entity:e,mixin:t};return function(t,e){for(var r in n)n[r](r,t,e);return t}}(),e.exports=r({request:function(t,e){return i(t,e)}})},{"../interceptor":37,"../util/mixin":55}],39:[function(t,e,n){"use strict";var r;r=t("../interceptor"),e.exports=r({init:function(t){return t.code=t.code||400,t},response:function(t,e){return t.status&&t.status.code>=e.code?Promise.reject(t):t}})},{"../interceptor":37}],40:[function(t,e,n){"use strict";var r,o,i,a,s,u;r=t("../interceptor"),o=t("../mime"),i=t("../mime/registry"),u=t("../util/attempt"),a={read:function(t){return t},write:function(t){return t}},s={read:function(){throw"No read method found on converter"},write:function(){throw"No write method found on converter"}},e.exports=r({init:function(t){return t.registry=t.registry||i,t},request:function(t,e){var n,r;return r=t.headers||(t.headers={}),n=o.parse(r["Content-Type"]||e.mime||"text/plain"),r.Accept=r.Accept||e.accept||n.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in t?(r["Content-Type"]=n.raw,e.registry.lookup(n).catch(function(){if(e.permissive)return a;throw"mime-unknown"}).then(function(r){var o=e.client||t.originator,i=r.write||s.write;return u(i.bind(void 0,t.entity,{client:o,request:t,mime:n,registry:e.registry})).catch(function(){throw"mime-serialization"}).then(function(e){return t.entity=e,t})})):t},response:function(t,e){if(!(t.headers&&t.headers["Content-Type"]&&t.entity))return t;var n=o.parse(t.headers["Content-Type"]);return e.registry.lookup(n).catch(function(){return a}).then(function(r){var o=e.client||t.request&&t.request.originator,i=r.read||s.read;return u(i.bind(void 0,t.entity,{client:o,response:t,mime:n,registry:e.registry})).catch(function(e){throw t.error="mime-deserialization",t.cause=e,t}).then(function(e){return t.entity=e,t})})}})},{"../interceptor":37,"../mime":43,"../mime/registry":44,"../util/attempt":51}],41:[function(t,e,n){"use strict";function r(t,e){return 0===t.indexOf(e)}function o(t,e){return t.lastIndexOf(e)+e.length===t.length}var i,a;i=t("../interceptor"),a=t("../UrlBuilder"),e.exports=i({request:function(t,e){var n;return e.prefix&&!new a(t.path).isFullyQualified()&&(n=e.prefix,t.path&&(o(n,"/")||r(t.path,"/")||(n+="/"),n+=t.path),t.path=n),t}})},{"../UrlBuilder":32,"../interceptor":37}],42:[function(t,e,n){"use strict";var r,o,i;r=t("../interceptor"),o=t("../util/uriTemplate"),i=t("../util/mixin"),e.exports=r({init:function(t){return t.params=t.params||{},t.template=t.template||"",t},request:function(t,e){var n,r;return n=t.path||e.template,r=i({},t.params,e.params),t.path=o.expand(n,r),delete t.params,t}})},{"../interceptor":37,"../util/mixin":55,"../util/uriTemplate":59}],43:[function(t,e,n){"use strict";function r(t){var e,n;return e=t.split(";"),n=e[0].trim().split("+"),{raw:t,type:n[0],suffix:n[1]?"+"+n[1]:"",params:e.slice(1).reduce(function(t,e){return e=e.split("="),t[e[0].trim()]=e[1]?e[1].trim():void 0,t},{})}}e.exports={parse:r}},{}],44:[function(t,e,n){"use strict";function r(t){this.lookup=function(e){var n;return n="string"==typeof e?o.parse(e):e,t[n.raw]?t[n.raw]:t[n.type+n.suffix]?t[n.type+n.suffix]:t[n.type]?t[n.type]:t[n.suffix]?t[n.suffix]:Promise.reject(new Error('Unable to locate converter for mime "'+n.raw+'"'))},this.delegate=function(t){return{read:function(){var e=arguments;return this.lookup(t).then(function(t){return t.read.apply(this,e)}.bind(this))}.bind(this),write:function(){var e=arguments;return this.lookup(t).then(function(t){return t.write.apply(this,e)}.bind(this))}.bind(this)}},this.register=function(e,n){return t[e]=Promise.resolve(n),t[e]},this.child=function(){return new r(Object.create(t))}}var o,i;o=t("../mime"),i=new r({}),i.register("application/hal",t("./type/application/hal")),i.register("application/json",t("./type/application/json")),i.register("application/x-www-form-urlencoded",t("./type/application/x-www-form-urlencoded")),i.register("multipart/form-data",t("./type/multipart/form-data")),i.register("text/plain",t("./type/text/plain")),i.register("+json",i.delegate("application/json")),e.exports=i},{"../mime":43,"./type/application/hal":45,"./type/application/json":46,"./type/application/x-www-form-urlencoded":47,"./type/multipart/form-data":48,"./type/text/plain":49}],45:[function(t,e,n){"use strict";function r(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writeable:!0})}var o,i,a,s,u;o=t("../../../interceptor/pathPrefix"),i=t("../../../interceptor/template"),a=t("../../../util/find"),s=t("../../../util/lazyPromise"),u=t("../../../util/responsePromise"),e.exports={read:function(t,e){function n(t,e){(e&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+t+"' is deprecated, see "+e)}var c,l;return e=e||{},c=e.client,l=e.console||l,e.registry.lookup(e.mime.suffix).then(function(n){return n.read(t,e)}).then(function(t){return a.findProperties(t,"_embedded",function(t,e,n){Object.keys(t).forEach(function(n){if(!(n in e)){var o=u({entity:t[n]});r(e,n,o)}}),r(e,n,t)}),a.findProperties(t,"_links",function(t,e,a){Object.keys(t).forEach(function(o){var a=t[o];o in e||r(e,o,u.make(s(function(){return a.deprecation&&n(o,a.deprecation),!0===a.templated?i(c)({path:a.href}):c({path:a.href})})))}),r(e,a,t),r(e,"clientFor",function(e,r){var a=t[e];if(!a)throw new Error("Unknown relationship: "+e);return a.deprecation&&n(e,a.deprecation),!0===a.templated?i(r||c,{template:a.href}):o(r||c,{prefix:a.href})}),r(e,"requestFor",function(t,e,n){return this.clientFor(t,n)(e)})}),t})},write:function(t,e){return e.registry.lookup(e.mime.suffix).then(function(n){return n.write(t,e)})}}},{"../../../interceptor/pathPrefix":41,"../../../interceptor/template":42,"../../../util/find":53,"../../../util/lazyPromise":54,"../../../util/responsePromise":57}],46:[function(t,e,n){"use strict";function r(t,e){return{read:function(e){return JSON.parse(e,t)},write:function(t){return JSON.stringify(t,e)},extend:r}}e.exports=r()},{}],47:[function(t,e,n){"use strict";function r(t){return t=encodeURIComponent(t),t.replace(a,"+")}function o(t){return t=t.replace(s," "),decodeURIComponent(t)}function i(t,e,n){return Array.isArray(n)?n.forEach(function(n){t=i(t,e,n)}):(t.length>0&&(t+="&"),t+=r(e),void 0!==n&&null!==n&&(t+="="+r(n))),t}var a,s;a=/%20/g,s=/\+/g,e.exports={read:function(t){var e={};return t.split("&").forEach(function(t){var n,r,i;n=t.split("="),r=o(n[0]),i=2===n.length?o(n[1]):null,r in e?(Array.isArray(e[r])||(e[r]=[e[r]]),e[r].push(i)):e[r]=i}),e},write:function(t){var e="";return Object.keys(t).forEach(function(n){e=i(e,n,t[n])}),e}}},{}],48:[function(t,e,n){"use strict";function r(t){return t&&1===t.nodeType&&"FORM"===t.tagName}function o(t){var e,n=new FormData;for(var r in t)t.hasOwnProperty(r)&&(e=t[r],e instanceof File?n.append(r,e,e.name):e instanceof Blob?n.append(r,e):n.append(r,String(e)));return n}e.exports={write:function(t){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(t instanceof FormData)return t;if(r(t))return new FormData(t);if("object"==typeof t&&null!==t)return o(t);throw new Error("Unable to create FormData from object "+t)}}},{}],49:[function(t,e,n){"use strict";e.exports={read:function(t){return t},write:function(t){return t.toString()}}},{}],50:[function(t,e,n){e.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function r(t){C<T||(C>T&&(T=C,S=[]),S.push(t))}function o(){var t,n,o,a,s,u,c,l,p;for(u=C,c=C,t=[],l=C,p=C,n=i(),null!==n?(o=h(),null!==o?(44===e.charCodeAt(C)?(a=",",C++):(a=null,0===O&&r('","')),null!==a?(s=h(),null!==s?n=[n,o,a,s]:(n=null,C=p)):(n=null,C=p)):(n=null,C=p)):(n=null,C=p),null!==n&&(n=function(t,e){return e}(0,n[0])),null===n&&(C=l);null!==n;)t.push(n),l=C,p=C,n=i(),null!==n?(o=h(),null!==o?(44===e.charCodeAt(C)?(a=",",C++):(a=null,0===O&&r('","')),null!==a?(s=h(),null!==s?n=[n,o,a,s]:(n=null,C=p)):(n=null,C=p)):(n=null,C=p)):(n=null,C=p),null!==n&&(n=function(t,e){return e}(0,n[0])),null===n&&(C=l);return null!==t?(n=i(),null!==n?t=[t,n]:(t=null,C=c)):(t=null,C=c),null!==t&&(t=function(t,e,n){return e.concat([n])}(0,t[0],t[1])),null===t&&(C=u),t}function i(){var t,n,o,i,u,c,l,p;if(l=C,p=C,60===e.charCodeAt(C)?(t="<",C++):(t=null,0===O&&r('"<"')),null!==t)if(null!==(n=s()))if(62===e.charCodeAt(C)?(o=">",C++):(o=null,0===O&&r('">"')),null!==o)if(null!==(i=h())){for(u=[],c=a();null!==c;)u.push(c),c=a();null!==u?t=[t,n,o,i,u]:(t=null,C=p)}else t=null,C=p;else t=null,C=p;else t=null,C=p;else t=null,C=p;return null!==t&&(t=function(t,e,n){var r={};return n.forEach(function(t){r[t[0]]=t[1]}),r.href=e,r}(0,t[1],t[4])),null===t&&(C=l),t}function a(){var t,n,o,i,a,s;return a=C,s=C,59===e.charCodeAt(C)?(t=";",C++):(t=null,0===O&&r('";"')),null!==t?(n=h(),null!==n?(o=u(),null!==o?(i=h(),null!==i?t=[t,n,o,i]:(t=null,C=s)):(t=null,C=s)):(t=null,C=s)):(t=null,C=s),null!==t&&(t=function(t,e){return e}(0,t[2])),null===t&&(C=a),t}function s(){var t,n,o;if(o=C,/^[^>]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===O&&r("[^>]")),null!==n)for(t=[];null!==n;)t.push(n),/^[^>]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===O&&r("[^>]"));else t=null;return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=o),t}function u(){var t,e,n,r;return n=C,r=C,t=c(),null!==t?(e=l(),e=null!==e?e:"",null!==e?t=[t,e]:(t=null,C=r)):(t=null,C=r),null!==t&&(t=function(t,e,n){return[e,n]}(0,t[0],t[1])),null===t&&(C=n),t}function c(){var t,n,o;if(o=C,/^[a-z]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===O&&r("[a-z]")),null!==n)for(t=[];null!==n;)t.push(n),/^[a-z]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===O&&r("[a-z]"));else t=null;return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=o),t}function l(){var t,n,o,i;return o=C,i=C,61===e.charCodeAt(C)?(t="=",C++):(t=null,0===O&&r('"="')),null!==t?(n=p(),null===n&&(n=d()),null!==n?t=[t,n]:(t=null,C=i)):(t=null,C=i),null!==t&&(t=function(t,e){return e}(0,t[1])),null===t&&(C=o),t}function p(){var t,e,n;if(n=C,null!==(e=f()))for(t=[];null!==e;)t.push(e),e=f();else t=null;return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=n),t}function f(){var t;return 33===e.charCodeAt(C)?(t="!",C++):(t=null,0===O&&r('"!"')),null===t&&(35===e.charCodeAt(C)?(t="#",C++):(t=null,0===O&&r('"#"')),null===t&&(36===e.charCodeAt(C)?(t="$",C++):(t=null,0===O&&r('"$"')),null===t&&(37===e.charCodeAt(C)?(t="%",C++):(t=null,0===O&&r('"%"')),null===t&&(38===e.charCodeAt(C)?(t="&",C++):(t=null,0===O&&r('"&"')),null===t&&(39===e.charCodeAt(C)?(t="'",C++):(t=null,0===O&&r('"\'"')),null===t&&(40===e.charCodeAt(C)?(t="(",C++):(t=null,0===O&&r('"("')),null===t&&(41===e.charCodeAt(C)?(t=")",C++):(t=null,0===O&&r('")"')),null===t&&(42===e.charCodeAt(C)?(t="*",C++):(t=null,0===O&&r('"*"')),null===t&&(43===e.charCodeAt(C)?(t="+",C++):(t=null,0===O&&r('"+"')),null===t&&(45===e.charCodeAt(C)?(t="-",C++):(t=null,0===O&&r('"-"')),null===t&&(46===e.charCodeAt(C)?(t=".",C++):(t=null,0===O&&r('"."')),null===t&&(124===e.charCodeAt(C)?(t="|",C++):(t=null,0===O&&r('"|"')),null===t&&null===(t=w())&&(58===e.charCodeAt(C)?(t=":",C++):(t=null,0===O&&r('":"')),null===t&&(60===e.charCodeAt(C)?(t="<",C++):(t=null,0===O&&r('"<"')),null===t&&(61===e.charCodeAt(C)?(t="=",C++):(t=null,0===O&&r('"="')),null===t&&(62===e.charCodeAt(C)?(t=">",C++):(t=null,0===O&&r('">"')),null===t&&(63===e.charCodeAt(C)?(t="?",C++):(t=null,0===O&&r('"?"')),null===t&&(64===e.charCodeAt(C)?(t="@",C++):(t=null,0===O&&r('"@"')),null===t&&null===(t=b())&&(91===e.charCodeAt(C)?(t="[",C++):(t=null,0===O&&r('"["')),null===t&&(93===e.charCodeAt(C)?(t="]",C++):(t=null,0===O&&r('"]"')),null===t&&(94===e.charCodeAt(C)?(t="^",C++):(t=null,0===O&&r('"^"')),null===t&&(95===e.charCodeAt(C)?(t="_",C++):(t=null,0===O&&r('"_"')),null===t&&(96===e.charCodeAt(C)?(t="`",C++):(t=null,0===O&&r('"`"')),null===t&&(123===e.charCodeAt(C)?(t="{",C++):(t=null,0===O&&r('"{"')),null===t&&(/^[\/\/]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r("[\\/\\/]")),null===t&&(125===e.charCodeAt(C)?(t="}",C++):(t=null,0===O&&r('"}"')),null===t&&(126===e.charCodeAt(C)?(t="~",C++):(t=null,0===O&&r('"~"'))))))))))))))))))))))))))))),t}function h(){var t,e;for(t=[],e=x();null!==e;)t.push(e),e=x();return t}function d(){var t,e,n,r,o;return r=C,o=C,t=_(),null!==t?(e=m(),null!==e?(n=_(),null!==n?t=[t,e,n]:(t=null,C=o)):(t=null,C=o)):(t=null,C=o),null!==t&&(t=function(t,e){return e}(0,t[1])),null===t&&(C=r),t}function m(){var t,e,n;for(n=C,t=[],e=k(),null===e&&(e=A());null!==e;)t.push(e),null===(e=k())&&(e=A());return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=n),t}function y(){var t;return/^[\0-]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r("[\\0-]")),t}function v(){var t;return/^[A-Z]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r("[A-Z]")),t}function g(){var t;return/^[a-z]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r("[a-z]")),t}function b(){var t;return t=v(),null===t&&(t=g()),t}function w(){var t;return/^[0-9]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r("[0-9]")),t}function x(){var t;return/^[ ]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r("[ ]")),t}function _(){var t;return/^["]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r('["]')),t}function k(){var t;return/^[^"]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r('[^"]')),t}function A(){var t,n,o;return o=C,/^[\\]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===O&&r("[\\\\]")),null!==t?(n=y(),null!==n?t=[t,n]:(t=null,C=o)):(t=null,C=o),t}var j={start:o,LinkValue:i,LinkParams:a,URIReference:s,LinkParam:u,LinkParamName:c,LinkParamValue:l,PToken:p,PTokenChar:f,OptionalSP:h,QuotedString:d,QuotedStringInternal:m,Char:y,UpAlpha:v,LoAlpha:g,Alpha:b,Digit:w,SP:x,DQ:_,QDText:k,QuotedPair:A};if(void 0!==n){if(void 0===j[n])throw new Error("Invalid rule name: "+t(n)+".")}else n="start";var C=0,O=0,T=0,S=[],P=j[n]();if(null===P||C!==e.length){var q=Math.max(C,T),E=q<e.length?e.charAt(q):null,z=function(){for(var t=1,n=1,r=!1,o=0;o<Math.max(C,T);o++){var i=e.charAt(o);"\n"===i?(r||t++,n=1,r=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,n=[],r=0;r<t.length;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}(S),E,q,z.line,z.column)}return P},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,r,o,i){this.name="SyntaxError",this.expected=e,this.found=n,this.message=function(e,n){var r,o;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return o=n?t(n):"end of input","Expected "+r+" but "+o+" found."}(e,n),this.offset=r,this.line=o,this.column=i},e.SyntaxError.prototype=Error.prototype,e}()},{}],51:[function(t,e,n){"use strict";function r(t){try{return Promise.resolve(t())}catch(t){return Promise.reject(t)}}e.exports=r},{}],52:[function(t,e,n){"use strict";function r(t){if(/([^\u0000-\u00ff])/.test(t))throw new Error("Can't base64 encode non-ASCII characters.");for(var e,n,r,o=0,a=[];o<t.length;){switch(e=t.charCodeAt(o),r=o%3){case 0:a.push(i.charAt(e>>2));break;case 1:a.push(i.charAt((3&n)<<4|e>>4));break;case 2:a.push(i.charAt((15&n)<<2|e>>6)),a.push(i.charAt(63&e))}n=e,o+=1}return 0===r?(a.push(i.charAt((3&n)<<4)),a.push("==")):1===r&&(a.push(i.charAt((15&n)<<2)),a.push("=")),a.join("")}function o(t){if(t=t.replace(/\s/g,""),!/^[a-z0-9\+\/\s]+\={0,2}$/i.test(t)||t.length%4>0)throw new Error("Not a base64-encoded string.");var e,n,r=0,o=[];for(t=t.replace(/\=/g,"");r<t.length;){switch(e=i.indexOf(t.charAt(r)),r%4){case 1:o.push(String.fromCharCode(n<<2|e>>4));break;case 2:o.push(String.fromCharCode((15&n)<<4|e>>2));break;case 3:o.push(String.fromCharCode((3&n)<<6|e))}n=e,r+=1}return o.join("")}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports={encode:r,decode:o}},{}],53:[function(t,e,n){"use strict";e.exports={findProperties:function t(e,n,r){"object"==typeof e&&null!==e&&(n in e&&r(e[n],e,n),Object.keys(e).forEach(function(o){t(e[o],n,r)}))}}},{}],54:[function(t,e,n){"use strict";function r(t){var e,n,r,i;return e=!1,r=new Promise(function(t,e){n={resolve:t,reject:e}}),i=r.then,r.then=function(){return e||(e=!0,o(t).then(n.resolve,n.reject)),i.apply(r,arguments)},r}var o=t("./attempt");e.exports=r},{"./attempt":51}],55:[function(t,e,n){"use strict";function r(t){
var e,n,r,i;for(t||(t={}),e=1,n=arguments.length;e<n;e+=1){r=arguments[e];for(i in r)i in t&&(t[i]===r[i]||i in o&&o[i]===r[i])||(t[i]=r[i])}return t}var o={};e.exports=r},{}],56:[function(t,e,n){"use strict";function r(t){return t.toLowerCase().split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}e.exports=r},{}],57:[function(t,e,n){"use strict";function r(t,e){return t.then(function(t){return t&&t[e]},function(t){return Promise.reject(t&&t[e])})}function o(){return r(this,"entity")}function i(){return r(r(this,"status"),"code")}function a(){return r(this,"headers")}function s(t){return t=p(t),r(this.headers(),t)}function u(t){return t=[].concat(t),c(t.reduce(function(t,e){return t.then(function(t){if("string"==typeof e&&(e={rel:e}),"function"!=typeof t.entity.clientFor)throw new Error("Hypermedia response expected");return t.entity.clientFor(e.rel)({params:e.params})})},this))}function c(t){return t.status=i,t.headers=a,t.header=s,t.entity=o,t.follow=u,t}function l(t,e,n){return c(Promise.resolve(t).then(e,n))}var p=t("./normalizeHeaderName");l.make=c,l.reject=function(t){return c(Promise.reject(t))},l.promise=function(t){return c(new Promise(t))},e.exports=l},{"./normalizeHeaderName":56}],58:[function(t,e,n){"use strict";function r(t,e){if("string"!=typeof t)throw new Error("String required for URL encoding");return t.split("").map(function(t){if(e.hasOwnProperty(t))return t;var n=t.charCodeAt(0);if(n<=127){var r=n.toString(16).toUpperCase();return"%"+(r.length%2==1?"0":"")+r}return encodeURIComponent(t).toUpperCase()}).join("")}function o(t){return t=t||a.unreserved,function(e){return r(e,t)}}function i(t){return decodeURIComponent(t)}var a;a=function(){var t={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return t.genDelims=":/?#[]@",t.subDelims="!$&'()*+,;=",t.reserved=t.genDelims+t.subDelims,t.unreserved=t.alpha+t.digit+"-._~",t.url=t.reserved+t.unreserved,t.scheme=t.alpha+t.digit+"+-.",t.userinfo=t.unreserved+t.subDelims+":",t.host=t.unreserved+t.subDelims,t.port=t.digit,t.pchar=t.unreserved+t.subDelims+":@",t.segment=t.pchar,t.path=t.segment+"/",t.query=t.pchar+"/?",t.fragment=t.pchar+"/?",Object.keys(t).reduce(function(e,n){return e[n]=t[n].split("").reduce(function(t,e){return t[e]=!0,t},{}),e},{})}(),e.exports={decode:i,encode:o(),encodeURL:o(a.url),encodeScheme:o(a.scheme),encodeUserInfo:o(a.userinfo),encodeHost:o(a.host),encodePort:o(a.port),encodePathSegment:o(a.segment),encodePath:o(a.path),encodeQuery:o(a.query),encodeFragment:o(a.fragment)}},{}],59:[function(t,e,n){"use strict";function r(t,e,n){return e.split(",").reduce(function(e,r){var o,i;if(o={},"*"===r.slice(-1)&&(r=r.slice(0,-1),o.explode=!0),u.test(r)){var s=u.exec(r);r=s[1],o.maxLength=parseInt(s[2])}return r=a.decode(r),void 0===(i=n[r])||null===i?e:(Array.isArray(i)?e=i.reduce(function(e,n){return e.length?(e+=o.explode?t.separator:",",t.named&&o.explode&&(e+=t.encoder(r),e+=n.length?"=":t.empty)):(e+=t.first,t.named&&(e+=t.encoder(r),e+=n.length?"=":t.empty)),e+=t.encoder(n)},e):"object"==typeof i?e=Object.keys(i).reduce(function(e,n){return e.length?e+=o.explode?t.separator:",":(e+=t.first,t.named&&!o.explode&&(e+=t.encoder(r),e+=i[n].length?"=":t.empty)),e+=t.encoder(n),e+=o.explode?"=":",",e+=t.encoder(i[n])},e):(i=String(i),o.maxLength&&(i=i.slice(0,o.maxLength)),e+=e.length?t.separator:t.first,t.named&&(e+=t.encoder(r),e+=i.length?"=":t.empty),e+=t.encoder(i)),e)},"")}function o(t,e){var n;if(n=s[t.slice(0,1)],n?t=t.slice(1):n=s[""],n.reserved)throw new Error("Reserved expression operations are not supported");return r(n,t,e)}function i(t,e){var n,r,i;for(i="",r=0;;){if(-1===(n=t.indexOf("{",r))){i+=t.slice(r);break}i+=t.slice(r,n),r=t.indexOf("}",n)+1,i+=o(t.slice(n+1,r-1),e)}return i}var a,s,u;a=t("./uriEncoder"),u=/^([^:]*):([0-9]+)$/,s={"":{first:"",separator:",",named:!1,empty:"",encoder:a.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:a.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:a.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:a.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:a.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:a.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:a.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:a.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},e.exports={expand:i}},{"./uriEncoder":58}],60:[function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return u(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function s(t,e){return t?o(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function p(t){return null==t}var f=t("punycode");n.parse=o,n.resolve=a,n.resolveObject=s,n.format=i,n.Url=r;var h=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(y),g=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=t("querystring");r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=h.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||o&&k[o]||(r=r.substr(2),this.slashes=!0)}if(!k[o]&&(a||o&&!A[o])){for(var s=-1,c=0;c<b.length;c++){var l=r.indexOf(b[c]);-1!==l&&(-1===s||l<s)&&(s=l)}var p,d;d=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==d&&(p=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(p)),s=-1;for(var c=0;c<g.length;c++){var l=r.indexOf(g[c]);-1!==l&&(-1===s||l<s)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),c=0,C=y.length;c<C;c++){var O=y[c];if(O&&!O.match(w)){for(var T="",S=0,P=O.length;S<P;S++)O.charCodeAt(S)>127?T+="x":T+=O[S];if(!T.match(w)){var q=y.slice(0,c),E=y.slice(c+1),z=O.match(x);z&&(q.push(z[1]),E.unshift(z[2])),E.length&&(r="/"+E.join(".")+r),this.hostname=q.join(".");break}}}if(this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var M=this.hostname.split("."),U=[],c=0;c<M.length;++c){var F=M[c];U.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(F):F)}this.hostname=U.join(".")}var D=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+D,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!_[i])for(var c=0,C=v.length;c<C;c++){var R=v[c],N=encodeURIComponent(R);N===R&&(N=escape(R)),r=r.split(R).join(N)}var L=r.indexOf("#");-1!==L&&(this.hash=r.substr(L),r=r.slice(0,L));var J=r.indexOf("?");if(-1!==J?(this.search=r.substr(J),this.query=r.substr(J+1),e&&(this.query=j.parse(this.query)),r=r.slice(0,J)):e&&(this.search="",this.query={}),r&&(this.pathname=r),A[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",F=this.search||"";this.path=D+F}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=j.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),A[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!A[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||k[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",a=n.search||"";n.path=i+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=c||s||n.host&&t.pathname,h=f,d=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],m=n.protocol&&!A[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),f=f&&(""===o[0]||""===d[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),n.search=t.search,n.query=t.query;else if(!p(t.search)){if(m){n.hostname=n.host=d.shift();var y=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=d.slice(-1)[0],g=(n.host||t.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!f&&!h)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),g&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){n.hostname=n.host=x?"":d.length?d.shift():"";var y=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return f=f||n.host&&d.length,f&&!x&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:28,querystring:31}],61:[function(t,e,n){var r=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var n=Math.log(Math.pow(2,t))/Math.log(e),o=2;n===1/0;o*=2)n=Math.log(Math.pow(2,t/o))/Math.log(e)*o;for(var i=n-Math.floor(n),a="",o=0;o<Math.floor(n);o++){var s=Math.floor(Math.random()*e).toString(e);a=s+a}if(i){var u=Math.pow(e,i),s=Math.floor(Math.random()*u).toString(e);a=s+a}var c=parseInt(a,e);return c!==1/0&&c>=Math.pow(2,t)?r(t,e):a}},{}],62:[function(t,e,n){(function(t){"use strict";var n=t.env.NODE_ENV,r=function(t,e,r,o,i,a,s,u){if("production"!==n&&void 0===e)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,o,i,a,s,u],p=0;c=new Error(e.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};e.exports=r}).call(this,t("_process"))},{_process:27}],63:[function(t,e,n){"use strict";function r(t,e){t=Math.round(t*e),(t<<=1)<0&&(t=~t);for(var n="";t>=32;)n+=String.fromCharCode(63+(32|31&t)),t>>=5;return n+=String.fromCharCode(t+63)}function o(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice().reverse());return e}var i={};i.encode=function(t,e){if(!t.length)return"";for(var n=Math.pow(10,e||5),o=r(t[0][0],n)+r(t[0][1],n),i=1;i<t.length;i++){var a=t[i],s=t[i-1];o+=r(a[0]-s[0],n),o+=r(a[1]-s[1],n)}return o},i.fromGeoJSON=function(t,e){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return i.encode(o(t.coordinates),e)},e.exports=i},{}],64:[function(t,e,n){function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t}function o(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t}e.exports.extendMutable=r,e.exports.extend=o;var i=Object.prototype.hasOwnProperty},{}]},{},[9])(9)});
