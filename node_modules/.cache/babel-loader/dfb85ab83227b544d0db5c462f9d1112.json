{"ast":null,"code":"/*\n * Copyright 2012-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n'use strict';\n\nvar encodedSpaceRE, urlEncodedSpaceRE;\nencodedSpaceRE = /%20/g;\nurlEncodedSpaceRE = /\\+/g;\n\nfunction urlEncode(str) {\n  str = encodeURIComponent(str); // spec says space should be encoded as '+'\n\n  return str.replace(encodedSpaceRE, '+');\n}\n\nfunction urlDecode(str) {\n  // spec says space should be encoded as '+'\n  str = str.replace(urlEncodedSpaceRE, ' ');\n  return decodeURIComponent(str);\n}\n\nfunction append(str, name, value) {\n  if (Array.isArray(value)) {\n    value.forEach(function (value) {\n      str = append(str, name, value);\n    });\n  } else {\n    if (str.length > 0) {\n      str += '&';\n    }\n\n    str += urlEncode(name);\n\n    if (value !== undefined && value !== null) {\n      str += '=' + urlEncode(value);\n    }\n  }\n\n  return str;\n}\n\nmodule.exports = {\n  read: function read(str) {\n    var obj = {};\n    str.split('&').forEach(function (entry) {\n      var pair, name, value;\n      pair = entry.split('=');\n      name = urlDecode(pair[0]);\n\n      if (pair.length === 2) {\n        value = urlDecode(pair[1]);\n      } else {\n        value = null;\n      }\n\n      if (name in obj) {\n        if (!Array.isArray(obj[name])) {\n          // convert to an array, perserving currnent value\n          obj[name] = [obj[name]];\n        }\n\n        obj[name].push(value);\n      } else {\n        obj[name] = value;\n      }\n    });\n    return obj;\n  },\n  write: function write(obj) {\n    var str = '';\n    Object.keys(obj).forEach(function (name) {\n      str = append(str, name, obj[name]);\n    });\n    return str;\n  }\n};","map":null,"metadata":{},"sourceType":"script"}