{"ast":null,"code":"import _classCallCheck from \"/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/src/map.js\";\nimport React, { Component } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport ToggleableLayers from './toggleableLayersObjects.js';\nimport './index.css';\nimport { setPopup, getCategories, getResourceObject } from './map-services.js';\nimport Menu from './components';\nmapboxgl.accessToken = 'pk.eyJ1IjoicmVmdWdlZXN3ZWxjb21lIiwiYSI6ImNqZ2ZkbDFiODQzZmgyd3JuNTVrd3JxbnAifQ.UY8Y52GQKwtVBXH2ssbvgw';\n\nvar Map =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Map, _React$Component);\n\n  function Map() {\n    _classCallCheck(this, Map);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Map).apply(this, arguments));\n  }\n\n  _createClass(Map, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log('mapLoaded');\n      var map = new mapboxgl.Map({\n        container: 'map',\n        // container id\n        style: 'mapbox://styles/refugeeswelcome/cjh9k11zz15ds2spbs4ld6y9o',\n        // stylesheet location\n        center: [-71.066954, 42.359947],\n        // starting position [lng, lat]\n        zoom: 11 // starting zoom\n\n      });\n      var services = map.querySourceFeatures('composite', {\n        sourceLayer: 'refugees-services'\n      });\n      var categoriesList = getCategories(services);\n      var resourceObjects = getResourceObject(map);\n      console.log(categoriesList, resourceObjects, services);\n      var geocoder = new MapboxGeocoder({\n        accessToken: mapboxgl.accessToken\n      });\n      map.addControl(geocoder);\n      map.on('load', function () {\n        // categoriesList.map(function(i){ return map.setLayoutProperty(i, 'visibility', 'none'); \n        map.on('click', function (e, map) {\n          return setPopup(e, map);\n        });\n      });\n      map.addSource('single-point', {\n        \"type\": \"geojson\",\n        \"data\": {\n          \"type\": \"FeatureCollection\",\n          \"features\": []\n        }\n      });\n      map.addLayer({\n        \"id\": \"point\",\n        \"source\": \"single-point\",\n        \"type\": \"circle\",\n        \"paint\": {\n          \"circle-radius\": 10,\n          \"circle-color\": \"#007cbf\"\n        }\n      });\n      geocoder.on('result', function (ev) {\n        map.removeLayer('circle-outline');\n        map.removeLayer('circle-outline-two');\n        map.removeLayer('circle-outline-three');\n        map.removeLayer('circle-outline-four');\n        map.getSource('single-point').setData(ev.result.geometry);\n        var center = {\n          \"type\": \"Feature\",\n          \"properties\": {\n            \"marker-color\": \"#0f0\"\n          },\n          \"geometry\": {\n            \"type\": \"Point\",\n            \"coordinates\": ev.result.geometry.coordinates\n          }\n        };\n        var radius = .5;\n        var options = {\n          steps: 100,\n          units: 'miles'\n        };\n        var circle = MapboxGeocoder.turf.circle(center, radius, options);\n        map.addLayer({\n          \"id\": \"circle-outline\",\n          \"type\": \"line\",\n          \"source\": {\n            \"type\": \"geojson\",\n            \"data\": circle\n          },\n          \"paint\": {\n            \"line-color\": \"#046328\",\n            \"line-opacity\": 0.8,\n            \"line-width\": 10,\n            \"line-offset\": 5\n          },\n          \"layout\": {}\n        });\n        var radiusTwo = 1;\n        var circleTwo = MapboxGeocoder.turf.circle(center, radiusTwo, options);\n        map.addLayer({\n          \"id\": \"circle-outline-two\",\n          \"type\": \"line\",\n          \"source\": {\n            \"type\": \"geojson\",\n            \"data\": circleTwo\n          },\n          \"paint\": {\n            \"line-color\": \"#00AA46\",\n            \"line-opacity\": 0.8,\n            \"line-width\": 10,\n            \"line-offset\": 5\n          },\n          \"layout\": {}\n        });\n        var radiusThree = 3;\n        var circleThree = MapboxGeocoder.turf.circle(center, radiusThree, options);\n        map.addLayer({\n          \"id\": \"circle-outline-three\",\n          \"type\": \"line\",\n          \"source\": {\n            \"type\": \"geojson\",\n            \"data\": circleThree\n          },\n          \"paint\": {\n            \"line-color\": \"#71C780\",\n            \"line-opacity\": 0.8,\n            \"line-width\": 10,\n            \"line-offset\": 5\n          },\n          \"layout\": {}\n        });\n        var radiusFour = 5;\n        var circleFour = MapboxGeocoder.turf.circle(center, radiusFour, options);\n        map.addLayer({\n          \"id\": \"circle-outline-four\",\n          \"type\": \"line\",\n          \"source\": {\n            \"type\": \"geojson\",\n            \"data\": circleFour\n          },\n          \"paint\": {\n            \"line-color\": \"#D5EDDB\",\n            \"line-opacity\": 0.8,\n            \"line-width\": 10,\n            \"line-offset\": 5\n          },\n          \"layout\": {}\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.map.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var style = {\n        position: 'absolute',\n        top: '100px',\n        bottom: '5px',\n        width: '50%'\n      };\n      return React.createElement(\"div\", {\n        className: \"map\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"map\",\n        style: style,\n        ref: function ref(el) {\n          this.mapContainer = el;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }), React.createElement(Menu, {\n        categoryList: this.categoryList,\n        map: this.map,\n        resourceObjects: this.resourceObjects,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Map;\n}(React.Component);\n\n;\nexport default Map;","map":{"version":3,"sources":["/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/src/map.js"],"names":["React","Component","mapboxgl","MapboxGeocoder","ToggleableLayers","setPopup","getCategories","getResourceObject","Menu","accessToken","Map","console","log","map","container","style","center","zoom","services","querySourceFeatures","sourceLayer","categoriesList","resourceObjects","geocoder","addControl","on","e","addSource","addLayer","ev","removeLayer","getSource","setData","result","geometry","coordinates","radius","options","steps","units","circle","turf","radiusTwo","circleTwo","radiusThree","circleThree","radiusFour","circleFour","remove","position","top","bottom","width","el","mapContainer","categoryList"],"mappings":"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","sourcesContent":["import React, {\n    Component\n} from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport ToggleableLayers from './toggleableLayersObjects.js';\nimport './index.css';\nimport { setPopup, getCategories, getResourceObject } from './map-services.js';\nimport Menu from './components';\n\n\nmapboxgl.accessToken = 'pk.eyJ1IjoicmVmdWdlZXN3ZWxjb21lIiwiYSI6ImNqZ2ZkbDFiODQzZmgyd3JuNTVrd3JxbnAifQ.UY8Y52GQKwtVBXH2ssbvgw';\n\n\nclass Map extends React.Component {\n\n    \n    componentDidMount() {\n        console.log('mapLoaded');\n        let map = new mapboxgl.Map({\n            container: 'map', // container id\n            style: 'mapbox://styles/refugeeswelcome/cjh9k11zz15ds2spbs4ld6y9o', // stylesheet location\n            center: [-71.066954, 42.359947], // starting position [lng, lat]\n            zoom: 11 // starting zoom\n        });\n\n        var services = map.querySourceFeatures('composite', {sourceLayer: 'refugees-services'});\n        var categoriesList = getCategories(services); \n        var resourceObjects = getResourceObject(map); \n        console.log(categoriesList, resourceObjects, services); \n\n\n        let geocoder = new MapboxGeocoder({\n            accessToken: mapboxgl.accessToken\n        });\n\n        map.addControl(geocoder);\n\n\n        map.on('load', function () {\n            // categoriesList.map(function(i){ return map.setLayoutProperty(i, 'visibility', 'none'); \n\n            map.on('click', function(e, map){return setPopup(e, map)}); \n        }); \n\n            map.addSource('single-point', {\n                \"type\": \"geojson\",\n                \"data\": {\n                    \"type\": \"FeatureCollection\",\n                    \"features\": []\n                }\n            });\n            map.addLayer({\n                \"id\": \"point\",\n                \"source\": \"single-point\",\n                \"type\": \"circle\",\n                \"paint\": {\n                    \"circle-radius\": 10,\n                    \"circle-color\": \"#007cbf\"\n                }\n            });\n            geocoder.on('result', function (ev) {\n                map.removeLayer('circle-outline');\n                map.removeLayer('circle-outline-two');\n                map.removeLayer('circle-outline-three');\n                map.removeLayer('circle-outline-four');\n                map.getSource('single-point').setData(ev.result.geometry);\n                var center = {\n                    \"type\": \"Feature\",\n                    \"properties\": {\n                        \"marker-color\": \"#0f0\"\n                    },\n                    \"geometry\": {\n                        \"type\": \"Point\",\n                        \"coordinates\": ev.result.geometry.coordinates\n                    }\n                };\n                var radius = .5;\n                var options = {\n                    steps: 100,\n                    units: 'miles'\n                };\n                var circle = MapboxGeocoder.turf.circle(center, radius, options);\n                map.addLayer({\n                    \"id\": \"circle-outline\",\n                    \"type\": \"line\",\n                    \"source\": {\n                        \"type\": \"geojson\",\n                        \"data\": circle\n                    },\n                    \"paint\": {\n                        \"line-color\": \"#046328\",\n                        \"line-opacity\": 0.8,\n                        \"line-width\": 10,\n                        \"line-offset\": 5\n                    },\n                    \"layout\": {}\n                });\n                var radiusTwo = 1;\n                var circleTwo = MapboxGeocoder.turf.circle(center, radiusTwo, options);\n                map.addLayer({\n                    \"id\": \"circle-outline-two\",\n                    \"type\": \"line\",\n                    \"source\": {\n                        \"type\": \"geojson\",\n                        \"data\": circleTwo\n                    },\n                    \"paint\": {\n                        \"line-color\": \"#00AA46\",\n                        \"line-opacity\": 0.8,\n                        \"line-width\": 10,\n                        \"line-offset\": 5\n                    },\n                    \"layout\": {}\n                });\n                var radiusThree = 3;\n                var circleThree = MapboxGeocoder.turf.circle(center, radiusThree, options);\n                map.addLayer({\n                    \"id\": \"circle-outline-three\",\n                    \"type\": \"line\",\n                    \"source\": {\n                        \"type\": \"geojson\",\n                        \"data\": circleThree\n                    },\n                    \"paint\": {\n                        \"line-color\": \"#71C780\",\n                        \"line-opacity\": 0.8,\n                        \"line-width\": 10,\n                        \"line-offset\": 5\n                    },\n                    \"layout\": {}\n                });\n                var radiusFour = 5;\n                var circleFour = MapboxGeocoder.turf.circle(center, radiusFour, options);\n                map.addLayer({\n                    \"id\": \"circle-outline-four\",\n                    \"type\": \"line\",\n                    \"source\": {\n                        \"type\": \"geojson\",\n                        \"data\": circleFour\n                    },\n                    \"paint\": {\n                        \"line-color\": \"#D5EDDB\",\n                        \"line-opacity\": 0.8,\n                        \"line-width\": 10,\n                        \"line-offset\": 5\n                    },\n                    \"layout\": {}\n                });\n            });\n\n    };\n\n\n    componentWillUnmount() {\n        this.map.remove();\n    }\n\n    render() {\n        var style = {\n            position: 'absolute',\n            top: '100px',\n            bottom: '5px',\n            width: '50%',\n        };\n        return (\n        <div className = 'map' >\n            <div id='map' style={style}\n                ref = { function(el){ this.mapContainer = el } } >\n            </div> \n            <Menu categoryList={this.categoryList} map={this.map} resourceObjects={this.resourceObjects} />\n        </div>\n        )\n    };\n}; \n\nexport default Map;"]},"metadata":{},"sourceType":"module"}