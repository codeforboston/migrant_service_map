{"ast":null,"code":"var _this = this;\n\nexport var loadMenu = function loadMenu(map) {\n  var nowMapLoaded = new Promise(function (resolve, reject) {\n    var services = map.querySourceFeatures('composite', {\n      sourceLayer: 'refugees-services'\n    });\n    map.on('load', resolve(services));\n  });\n  nowMapLoaded.then(function (services) {\n    return _this.setState({\n      services: services\n    });\n  });\n};\nexport function getResourceObject(services, categoriesList) {\n  console.log('typeof services', typeof services, 'typeof cateogries list', typeof categoriesList);\n  var resourceObject = categoriesList.map(function (i) {\n    var resource = services[i].properties;\n    resource.coordinates = services[i].geometry.coordinates;\n    resource.lngLat = services[i].lngLat;\n    return resource;\n  });\n  return resourceObject;\n} // get the types from mapbox data\n\nexport function getCategories(services) {\n  return services.map(function (a) {\n    return a.type;\n  }).filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}\n; // export function setPopup(e, map) {\n//   var coordinates = e.features[0].geometry.coordinates.slice();\n//   var name = e.features[0].properties.name;\n//   var website = e.features[0].properties.website;\n//   var bio = e.features[0].properties.bio;\n//   var telephone = e.features[0].properties.telephone;\n//   while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n//       coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n//   }\n//   new mapboxgl.Popup()\n//       .setLngLat(coordinates)\n//       .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n//       .addTo(map);\n// };\n\nexport function makeResourceEntry(map, mapboxgl) {\n  var resourceObject = getResourceObject(map);\n  var liLink = document.createElement('a');\n  var liList = document.createElement('li');\n  var liContainer = document.createElement('div');\n  liLink.id = resourceObject.name.toLowerCase().split(\" \").join('-');\n  var name = resourceObject.name;\n  var website = resourceObject.website;\n  var bio = resourceObject.bio;\n  var telephone = resourceObject.telephone;\n  var type = resourceObject.type;\n  var coordinates = resourceObject.coordinates;\n\n  liLink.onclick = function (e) {\n    new mapboxgl.Popup().setLngLat(coordinates).setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone).addTo(map);\n  };\n\n  liContainer.id = resourceObject.name;\n  liLink.innerHTML = resourceObject.name;\n  liLink.className = 'resource-entry';\n  liList.className = 'collapsed ' + liLink.id;\n  liContainer.className = 'resource-entry-box';\n  liContainer.appendChild(liLink);\n  liList.appendChild(liContainer);\n  return liList;\n}","map":{"version":3,"sources":["/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/src/map-services.js"],"names":["loadMenu","map","nowMapLoaded","Promise","resolve","reject","services","querySourceFeatures","sourceLayer","on","then","setState","getResourceObject","categoriesList","console","log","resourceObject","i","resource","properties","coordinates","geometry","lngLat","getCategories","a","type","filter","value","index","self","indexOf","makeResourceEntry","mapboxgl","liLink","document","createElement","liList","liContainer","id","name","toLowerCase","split","join","website","bio","telephone","onclick","e","Popup","setLngLat","setHTML","addTo","innerHTML","className","appendChild"],"mappings":"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","sourcesContent":["\n\n\n\nexport const loadMenu = (map) => {\n  const nowMapLoaded = new Promise((resolve, reject) => {\n      const services = map.querySourceFeatures('composite', {sourceLayer: 'refugees-services'});\n      map.on('load', resolve(services));\n  })\n  nowMapLoaded.then((services) => this.setState({ services: services }))\n};\n\n\n\nexport function getResourceObject(services, categoriesList){\n  console.log('typeof services', typeof(services), 'typeof cateogries list', typeof(categoriesList)); \n  var resourceObject = categoriesList.map(function(i){ \n      var resource = services[i].properties; \n      resource.coordinates = services[i].geometry.coordinates; \n      resource.lngLat = services[i].lngLat; \n      return resource; \n    }); \n  return resourceObject; \n}\n\n// get the types from mapbox data\nexport function getCategories(services){\n  return services.map(function(a){ return a.type })\n    .filter(function(value, index, self){    \n      return self.indexOf(value) === index ; \n    })\n};\n\n\n// export function setPopup(e, map) {\n//   var coordinates = e.features[0].geometry.coordinates.slice();\n//   var name = e.features[0].properties.name;\n//   var website = e.features[0].properties.website;\n//   var bio = e.features[0].properties.bio;\n//   var telephone = e.features[0].properties.telephone;\n//   while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n//       coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n//   }\n\n//   new mapboxgl.Popup()\n//       .setLngLat(coordinates)\n//       .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n//       .addTo(map);\n// };\n\n\nexport function makeResourceEntry(map, mapboxgl) {\n  var resourceObject = getResourceObject(map); \n  var liLink = document.createElement('a');\n  var liList = document.createElement('li'); \n  var liContainer = document.createElement('div'); \n  liLink.id = resourceObject.name.toLowerCase().split(\" \").join('-'); \n  var name = resourceObject.name; \n  var website = resourceObject.website;\n  var bio = resourceObject.bio;\n  var telephone = resourceObject.telephone; \n  var type = resourceObject.type; \n  var coordinates = resourceObject.coordinates; \n \n  liLink.onclick = function(e) {\n    new mapboxgl.Popup()\n      .setLngLat(coordinates)\n      .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n      .addTo(map);\n  }\n\n  liContainer.id = resourceObject.name; \n  liLink.innerHTML = resourceObject.name;\n  liLink.className = 'resource-entry';\n  liList.className = 'collapsed '+ liLink.id;\n  liContainer.className = 'resource-entry-box';\n  \n  liContainer.appendChild(liLink); \n  liList.appendChild(liContainer); \n\n  return liList; \n}"]},"metadata":{},"sourceType":"module"}