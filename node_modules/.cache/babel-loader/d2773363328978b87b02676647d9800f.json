{"ast":null,"code":"import mapboxgl from 'mapbox-gl';\nexport function getResourceObject(map) {\n  var services = map.querySourceFeatures('composite', {\n    sourceLayer: 'refugees-services'\n  });\n  var resourceObject = {};\n  var categories = getCategories(map);\n\n  for (var i = 0; i < services.length; i++) {\n    var type = services[i].properties.type;\n\n    if (!Object.keys(resourceObject).includes(type)) {\n      resourceObject[type] = [];\n    }\n\n    var resource = services[i].properties;\n    resource.coordinates = services[i].geometry.coordinates;\n    resource.lngLat = services[i].lngLat;\n    resourceObject[type].push(resource);\n  }\n\n  return resourceObject;\n} // get the types from mapbox data\n\nexport function getCategories(map) {\n  var services = map.querySourceFeatures('composite', {\n    sourceLayer: 'refugees-services'\n  });\n  return services.map(function (a) {\n    return a.type;\n  }).filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}\nexport function setPopup(e, map) {\n  var coordinates = e.features[0].geometry.coordinates.slice();\n  var name = e.features[0].properties.name;\n  var website = e.features[0].properties.website;\n  var bio = e.features[0].properties.bio;\n  var telephone = e.features[0].properties.telephone;\n\n  while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n    coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n  }\n\n  new mapboxgl.Popup().setLngLat(coordinates).setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone).addTo(map);\n}\n;\nexport function makeResourceEntry(map, mapboxgl) {\n  var resourceObject = getResourceObject(map);\n  var liLink = document.createElement('a');\n  var liList = document.createElement('li');\n  var liContainer = document.createElement('div');\n  liLink.id = resourceObject.name.toLowerCase().split(\" \").join('-');\n  var name = resourceObject.name;\n  var website = resourceObject.website;\n  var bio = resourceObject.bio;\n  var telephone = resourceObject.telephone;\n  var type = resourceObject.type;\n  var coordinates = resourceObject.coordinates;\n\n  liLink.onclick = function (e) {\n    new mapboxgl.Popup().setLngLat(coordinates).setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone).addTo(map);\n  };\n\n  liContainer.id = resourceObject.name;\n  liLink.innerHTML = resourceObject.name;\n  liLink.className = 'resource-entry';\n  liList.className = 'collapsed ' + liLink.id;\n  liContainer.className = 'resource-entry-box';\n  liContainer.appendChild(liLink);\n  liList.appendChild(liContainer);\n  return liList;\n}","map":{"version":3,"sources":["/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/src/map-services.js"],"names":["mapboxgl","getResourceObject","map","services","querySourceFeatures","sourceLayer","resourceObject","categories","getCategories","i","length","type","properties","Object","keys","includes","resource","coordinates","geometry","lngLat","push","a","filter","value","index","self","indexOf","setPopup","e","features","slice","name","website","bio","telephone","Math","abs","lng","Popup","setLngLat","setHTML","addTo","makeResourceEntry","liLink","document","createElement","liList","liContainer","id","toLowerCase","split","join","onclick","innerHTML","className","appendChild"],"mappings":"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","sourcesContent":["\nimport mapboxgl from 'mapbox-gl';\n\n\n\nexport function getResourceObject(map){\n  var services = map.querySourceFeatures('composite', {sourceLayer: 'refugees-services'});\n  var resourceObject = {};\n  var categories = getCategories(map); \n    for (var i = 0; i < services.length; i++) {\n      var type = services[i].properties.type; \n      if ( ! Object.keys(resourceObject).includes(type) ) {\n        resourceObject[type] = []; \n      }\n\n      var resource = services[i].properties; \n      resource.coordinates = services[i].geometry.coordinates; \n      resource.lngLat = services[i].lngLat; \n      resourceObject[type].push(resource); \n\n    }\n  return resourceObject; \n}\n\n\n// get the types from mapbox data\nexport function getCategories(map){\n    let services = map.querySourceFeatures('composite', {sourceLayer: 'refugees-services'});\n    return (\n      services.map(function(a){ return a.type })\n        .filter(function(value, index, self){    \n          return self.indexOf(value) === index ; \n      })\n    )\n}\n\nexport function setPopup(e, map) {\n  var coordinates = e.features[0].geometry.coordinates.slice();\n  var name = e.features[0].properties.name;\n  var website = e.features[0].properties.website;\n  var bio = e.features[0].properties.bio;\n  var telephone = e.features[0].properties.telephone;\n  while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n      coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n  }\n\n  new mapboxgl.Popup()\n      .setLngLat(coordinates)\n      .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n      .addTo(map);\n};\n\n\nexport function makeResourceEntry(map, mapboxgl) {\n  var resourceObject = getResourceObject(map); \n  var liLink = document.createElement('a');\n  var liList = document.createElement('li'); \n  var liContainer = document.createElement('div'); \n  liLink.id = resourceObject.name.toLowerCase().split(\" \").join('-'); \n  var name = resourceObject.name; \n  var website = resourceObject.website;\n  var bio = resourceObject.bio;\n  var telephone = resourceObject.telephone; \n  var type = resourceObject.type; \n  var coordinates = resourceObject.coordinates; \n \n  liLink.onclick = function(e) {\n    new mapboxgl.Popup()\n      .setLngLat(coordinates)\n      .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n      .addTo(map);\n  }\n\n  liContainer.id = resourceObject.name; \n  liLink.innerHTML = resourceObject.name;\n  liLink.className = 'resource-entry';\n  liList.className = 'collapsed '+ liLink.id;\n  liContainer.className = 'resource-entry-box';\n  \n  liContainer.appendChild(liLink); \n  liList.appendChild(liContainer); \n\n  return liList; \n}"]},"metadata":{},"sourceType":"module"}