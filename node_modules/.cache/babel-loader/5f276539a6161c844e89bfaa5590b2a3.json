{"ast":null,"code":"import mapboxgl from 'mapbox-gl'; // export const loadMenu = (map) => {\n//   const nowMapLoaded = new Promise((resolve, reject) => {\n//       resolve(map.querySourceFeatures('composite', {sourceLayer: 'refugees-services'})); \n//       reject(console.log('load menu rejected'));\n//   })\n// };\n\nexport function getResourceObject(sources) {\n  var resourceObject = sources.map(function (i) {\n    var resource = i.properties;\n    resource.coordinates = i.geometry.coordinates;\n    resource.lngLat = i.lngLat;\n    return resource;\n  });\n  return resourceObject;\n} // get the types from mapbox data\n\nexport function getCategories(sources) {\n  return sources.map(function (source) {\n    return source.properties.type;\n  }).filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}\n; // export function setPopup(e, map) {\n//   var coordinates = e.features[0].geometry.coordinates.slice();\n//   var name = e.features[0].properties.name;\n//   var website = e.features[0].properties.website;\n//   var bio = e.features[0].properties.bio;\n//   var telephone = e.features[0].properties.telephone;\n//   while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n//       coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n//   }\n//   new mapboxgl.Popup()\n//       .setLngLat(coordinates)\n//       .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n//       .addTo(map);\n// };\n\nexport function makeResourceEntry(resourceObject) {\n  var liLink = document.createElement('a');\n  var liList = document.createElement('li');\n  var liContainer = document.createElement('div');\n  liLink.id = resourceObject.name.toLowerCase().split(\" \").join('-');\n  var name = resourceObject.name;\n  var website = resourceObject.website;\n  var bio = resourceObject.bio;\n  var telephone = resourceObject.telephone; // var type = resourceObject.type; \n\n  var coordinates = resourceObject.coordinates;\n\n  liLink.onclick = function (e) {\n    new mapboxgl.Popup().setLngLat(coordinates).setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone); // .addTo(map);\n  };\n\n  liContainer.id = resourceObject.name;\n  liLink.innerHTML = resourceObject.name;\n  liLink.className = 'resource-entry';\n  liList.className = 'collapsed ' + liLink.id;\n  liContainer.className = 'resource-entry-box';\n  liContainer.appendChild(liLink);\n  liList.appendChild(liContainer);\n  return liList;\n}","map":{"version":3,"sources":["/Users/sashamaryl/Documents/codeForBoston/migrant_service_map/src/map-services.js"],"names":["mapboxgl","getResourceObject","sources","resourceObject","map","i","resource","properties","coordinates","geometry","lngLat","getCategories","source","type","filter","value","index","self","indexOf","makeResourceEntry","liLink","document","createElement","liList","liContainer","id","name","toLowerCase","split","join","website","bio","telephone","onclick","e","Popup","setLngLat","setHTML","innerHTML","className","appendChild"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,WAArB,C,CAGA;AACA;AAEA;AACA;AACA;AACA;;AAIA,OAAO,SAASC,iBAAT,CAA2BC,OAA3B,EAAmC;AACxC,MAAIC,cAAc,GAAGD,OAAO,CAACE,GAAR,CAAa,UAAAC,CAAC,EAAI;AACnC,QAAIC,QAAQ,GAAGD,CAAC,CAACE,UAAjB;AACAD,IAAAA,QAAQ,CAACE,WAAT,GAAuBH,CAAC,CAACI,QAAF,CAAWD,WAAlC;AACAF,IAAAA,QAAQ,CAACI,MAAT,GAAkBL,CAAC,CAACK,MAApB;AACA,WAAOJ,QAAP;AACD,GALkB,CAArB;AAMA,SAAOH,cAAP;AACD,C,CAED;;AACA,OAAO,SAASQ,aAAT,CAAuBT,OAAvB,EAA+B;AACpC,SAAOA,OAAO,CAACE,GAAR,CAAY,UAAAQ,MAAM;AAAA,WAAIA,MAAM,CAACL,UAAP,CAAkBM,IAAtB;AAAA,GAAlB,EACJC,MADI,CACG,UAACC,KAAD,EAAQC,KAAR,EAAeC,IAAf;AAAA,WAAwBA,IAAI,CAACC,OAAL,CAAaH,KAAb,MAAwBC,KAAhD;AAAA,GADH,CAAP;AAED;AAAA,C,CAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAGA,OAAO,SAASG,iBAAT,CAA2BhB,cAA3B,EAA2C;AAChD,MAAIiB,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;AACA,MAAIC,MAAM,GAAGF,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAb;AACA,MAAIE,WAAW,GAAGH,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAlB;AACAF,EAAAA,MAAM,CAACK,EAAP,GAAYtB,cAAc,CAACuB,IAAf,CAAoBC,WAApB,GAAkCC,KAAlC,CAAwC,GAAxC,EAA6CC,IAA7C,CAAkD,GAAlD,CAAZ;AACA,MAAIH,IAAI,GAAGvB,cAAc,CAACuB,IAA1B;AACA,MAAII,OAAO,GAAG3B,cAAc,CAAC2B,OAA7B;AACA,MAAIC,GAAG,GAAG5B,cAAc,CAAC4B,GAAzB;AACA,MAAIC,SAAS,GAAG7B,cAAc,CAAC6B,SAA/B,CARgD,CAShD;;AACA,MAAIxB,WAAW,GAAGL,cAAc,CAACK,WAAjC;;AAEAY,EAAAA,MAAM,CAACa,OAAP,GAAiB,UAASC,CAAT,EAAY;AAC3B,QAAIlC,QAAQ,CAACmC,KAAb,GACGC,SADH,CACa5B,WADb,EAEG6B,OAFH,CAEW,SAASX,IAAT,GAAgB,OAAhB,GAA0B,UAA1B,GAAuCI,OAAvC,GAAiD,GAAjD,GAAuDA,OAAvD,GAAiE,MAAjE,GAA0E,UAA1E,GAAuF,KAAvF,GAA+FC,GAA/F,GAAqG,MAArG,GAA8G,4BAA9G,GAA6IC,SAFxJ,EAD2B,CAIzB;AACH,GALD;;AAOAR,EAAAA,WAAW,CAACC,EAAZ,GAAiBtB,cAAc,CAACuB,IAAhC;AACAN,EAAAA,MAAM,CAACkB,SAAP,GAAmBnC,cAAc,CAACuB,IAAlC;AACAN,EAAAA,MAAM,CAACmB,SAAP,GAAmB,gBAAnB;AACAhB,EAAAA,MAAM,CAACgB,SAAP,GAAmB,eAAcnB,MAAM,CAACK,EAAxC;AACAD,EAAAA,WAAW,CAACe,SAAZ,GAAwB,oBAAxB;AAEAf,EAAAA,WAAW,CAACgB,WAAZ,CAAwBpB,MAAxB;AACAG,EAAAA,MAAM,CAACiB,WAAP,CAAmBhB,WAAnB;AAEA,SAAOD,MAAP;AACD","sourcesContent":["import mapboxgl from 'mapbox-gl';\n\n\n// export const loadMenu = (map) => {\n//   const nowMapLoaded = new Promise((resolve, reject) => {\n      \n//       resolve(map.querySourceFeatures('composite', {sourceLayer: 'refugees-services'})); \n//       reject(console.log('load menu rejected'));\n//   })\n// };\n\n\n\nexport function getResourceObject(sources){\n  var resourceObject = sources.map( i => {\n      var resource = i.properties; \n      resource.coordinates = i.geometry.coordinates; \n      resource.lngLat = i.lngLat; \n      return resource; \n    }); \n  return resourceObject; \n}\n\n// get the types from mapbox data\nexport function getCategories(sources){\n  return sources.map(source => source.properties.type)\n    .filter((value, index, self) => self.indexOf(value) === index ); \n};\n\n\n// export function setPopup(e, map) {\n//   var coordinates = e.features[0].geometry.coordinates.slice();\n//   var name = e.features[0].properties.name;\n//   var website = e.features[0].properties.website;\n//   var bio = e.features[0].properties.bio;\n//   var telephone = e.features[0].properties.telephone;\n//   while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n//       coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n//   }\n\n//   new mapboxgl.Popup()\n//       .setLngLat(coordinates)\n//       .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n//       .addTo(map);\n// };\n\n\nexport function makeResourceEntry(resourceObject) {\n  var liLink = document.createElement('a');\n  var liList = document.createElement('li'); \n  var liContainer = document.createElement('div'); \n  liLink.id = resourceObject.name.toLowerCase().split(\" \").join('-'); \n  var name = resourceObject.name; \n  var website = resourceObject.website;\n  var bio = resourceObject.bio;\n  var telephone = resourceObject.telephone; \n  // var type = resourceObject.type; \n  var coordinates = resourceObject.coordinates; \n \n  liLink.onclick = function(e) {\n    new mapboxgl.Popup()\n      .setLngLat(coordinates)\n      .setHTML('<h4>' + name + '</h4>' + '<a href=' + website + '>' + website + '</a>' + '<br><br>' + '<i>' + bio + '</i>' + '<br><br><b>Telephone: </b>' + telephone)\n      // .addTo(map);\n  }\n\n  liContainer.id = resourceObject.name; \n  liLink.innerHTML = resourceObject.name;\n  liLink.className = 'resource-entry';\n  liList.className = 'collapsed '+ liLink.id;\n  liContainer.className = 'resource-entry-box';\n  \n  liContainer.appendChild(liLink); \n  liList.appendChild(liContainer); \n\n  return liList; \n}"]},"metadata":{},"sourceType":"module"}