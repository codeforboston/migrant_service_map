{"ast":null,"code":"/*\n * Copyright 2012-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n'use strict';\n\nvar interceptor, UrlBuilder;\ninterceptor = require('../interceptor');\nUrlBuilder = require('../UrlBuilder');\n\nfunction startsWith(str, prefix) {\n  return str.indexOf(prefix) === 0;\n}\n\nfunction endsWith(str, suffix) {\n  return str.lastIndexOf(suffix) + suffix.length === str.length;\n}\n/**\n * Prefixes the request path with a common value.\n *\n * @param {Client} [client] client to wrap\n * @param {number} [config.prefix] path prefix\n *\n * @returns {Client}\n */\n\n\nmodule.exports = interceptor({\n  request: function request(_request, config) {\n    var path;\n\n    if (config.prefix && !new UrlBuilder(_request.path).isFullyQualified()) {\n      path = config.prefix;\n\n      if (_request.path) {\n        if (!endsWith(path, '/') && !startsWith(_request.path, '/')) {\n          // add missing '/' between path sections\n          path += '/';\n        }\n\n        path += _request.path;\n      }\n\n      _request.path = path;\n    }\n\n    return _request;\n  }\n});","map":null,"metadata":{},"sourceType":"script"}